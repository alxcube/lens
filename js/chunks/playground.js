(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{452:function(t,e,i){
/*!
 * @alxcube/lens 0.1.0
 * Â© 2020 Alexander Alexandrov <alxcube@gmail.com>
 * License: Apache-2.0
 */
t.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var n={};i.r(n),i.d(n,"blendColors",(function(){return V})),i.d(n,"perceptibleReciprocal",(function(){return O})),i.d(n,"rad2deg",(function(){return C})),i.d(n,"deg2rad",(function(){return I}));var o={};function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}i.r(o),i.d(o,"box",(function(){return ht})),i.d(o,"cubicBC",(function(){return mt}));var a=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.image=e,this.mapper=i,this.resampler=n,this.bestFit=!1,this.viewport=null,this.async=!0,this.outputScaling=1}var e,i;return e=t,(i=[{key:"distort",value:function(){var t=this;this.resampler.setImage(this.image),this.resampler.setMapper(this.mapper);var e=this.prepareViewport(),i=Math.floor(e.x1),n=Math.floor(e.y1),o=Math.floor(e.x2),r=Math.floor(e.y2),a=this.image.getBlank(e);return this.resampler.scaling=1/this.outputScaling,a instanceof Promise?a.then((function(e){return t.performDistortionAsync(e,i,n,o,r)})):this.async?this.performDistortionAsync(a,i,n,o,r):this.performDistortion(a,i,n,o,r)}},{key:"performDistortion",value:function(t,e,i,n,o){for(var r=i;r<=o;r++)for(var a=e;a<=n;a++)t.setPixelColor(a,r,this.resampler.getResampledColor(a+.5,r+.5));return t}},{key:"performDistortionAsync",value:function(){for(var t=this,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return new Promise((function(e){return setTimeout((function(){return e(t.performDistortion.apply(t,i),0)}))}))}},{key:"prepareViewport",value:function(){var t;return(t=this.viewport?this.viewport.clone():this.bestFit&&this.mapper.hasBestFitViewport?this.mapper.getBestFitViewport(this.image.viewport):this.image.viewport.clone()).scale(this.outputScaling),t}}])&&r(e.prototype,i),t}(),s={ReversePixelMapping:a};function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){var e="function"==typeof Map?new Map:void 0;return(c=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return f(t,arguments,h(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),d(n,t)})(t)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t,e,i){return(f=p()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return i&&d(o,i.prototype),o}).apply(null,arguments)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(t){function e(t){var i,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=!(n=h(e).call(this,t))||"object"!==l(n)&&"function"!=typeof n?u(this):n).name="LensException","function"==typeof Error.captureStackTrace?Error.captureStackTrace(u(i),i.constructor):i.stack=new Error(t).stack,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(e,t),e}(c(Error));function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=function(t,e){return!e||"object"!==b(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,g(e).call(this,t))).name="UnsolvableMatrix",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(e,t),e}(m),w=17976931348623157e292,x=Math.PI/2,_=2*Math.PI;function O(t){var e=t<0?-1:1;return e*t>=1e-12?1/t:e/1e-12}function V(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return null===n&&(n=1-e),t.map((function(t,o){return Math.round(t*e+i[o]*n)}))}function C(t){return 180*t/Math.PI}function I(t){return Math.PI*t/180}function P(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function S(t,e,i,n,o){t[e][i]!==t[n][o]&&(t[e][i]+=t[n][o],t[n][o]=t[e][i]-t[n][o],t[e][i]-=t[n][o])}function A(){throw new y("Can't solve given matrix using Gauss-Jordan method")}var k=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.solved=!1,this.matrix=e.map((function(t){return t.slice()})),this.vectors=i.map((function(t){return t.slice()}))}var e,i;return e=t,(i=[{key:"solve",value:function(){if(this.solved)return this;this.validate();for(var t=this.matrix,e=this.vectors,i=t.length,n=e.length,o=new Array(i).fill(0),r=new Array(i).fill(0),a=new Array(i).fill(0),s=0,l=0,u=0;u<i;u++){for(var c=0,p=0;p<i;p++)if(1!==a[p])for(var f=0;f<i;f++)0!==a[f]?a[f]>1&&A():Math.abs(t[p][f])>=c&&(c=Math.abs(t[p][f]),l=p,s=f);if(a[s]++,l!==s){for(var d=0;d<i;d++)S(t,l,d,s,d);for(var h=0;h<n;h++)S(e,h,l,h,s)}r[u]=l,o[u]=s,0===t[s][s]&&A();var m=O(t[s][s]);t[s][s]=1;for(var b=0;b<i;b++)t[s][b]*=m;for(var g=0;g<n;g++)e[g][s]*=m;for(var v=0;v<i;v++)if(v!==s){var y=t[v][s];t[v][s]=0;for(var w=0;w<i;w++)t[v][w]-=y*t[s][w];for(var x=0;x<n;x++)e[x][v]-=y*e[x][s]}}for(var _=i-1;_>=0;_--)if(o[_]!==r[_])for(var V=0;V<i;V++)S(t,V,r[_],V,o[_]);return this.solved=!0,this}},{key:"getVectors",value:function(){return this.vectors.map((function(t){return t.slice()}))}},{key:"validate",value:function(){var t=this.matrix.length;return this.matrix.forEach((function(e){if(e.length!==t)throw new Error("Matrix must be square")})),this.vectors.forEach((function(e){if(e.length!==t)throw new Error("Vectors must be the same length as matrix rank")})),this}}])&&P(e.prototype,i),t}();function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function j(t,e){return!e||"object"!==F(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function D(t,e){return(D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var B=function(t){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;M(this,e);for(var n=[],o=[],r=0;r<t;r++)n.push(new Array(t).fill(0));for(var a=0;a<i;a++)o.push(new Array(t).fill(0));return j(this,E(e).call(this,n,o))}var i,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&D(t,e)}(e,t),i=e,(n=[{key:"addTerms",value:function(t,e){for(var i=this.matrix.length,n=0;n<i;n++){for(var o=0;o<i;o++)this.matrix[o][n]+=t[o]*t[n];for(var r=0;r<this.vectors.length;r++)this.vectors[r][n]+=e[r]*t[n]}return this}}])&&T(i.prototype,n),e}(k);function R(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var L=function(){function t(e,i,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x1=e,this.y1=i,this.x2=n,this.y2=o}var e,i;return e=t,(i=[{key:"width",value:function(){return this.x2-this.x1+1}},{key:"height",value:function(){return this.y2-this.y1+1}},{key:"area",value:function(){return this.width()*this.height()}},{key:"contains",value:function(t,e){return t>=this.x1&&t<=this.x2&&e>=this.y1&&e<=this.y2}},{key:"expand",value:function(t,e){return this.x1=Math.min(this.x1,t),this.x2=Math.max(this.x2,t),this.y1=Math.min(this.y1,e),this.y2=Math.max(this.y2,e),this}},{key:"clone",value:function(){return new this.constructor(this.x1,this.y1,this.x2,this.y2)}},{key:"fixBounds",value:function(){return this.x1=Math.floor(this.x1-.5),this.y1=Math.floor(this.y1-.5),this.x2=Math.ceil(this.x2-.5),this.y2=Math.ceil(this.y2-.5),this}},{key:"scale",value:function(t){return this.x1=Math.round(this.x1*t),this.y1=Math.round(this.y1*t),this.x2=Math.round(this.x2*t),this.y2=Math.round(this.y2*t),this}},{key:"reset",value:function(){var t=this.width(),e=this.height();return this.x1=0,this.y1=0,this.x2=this.x1+t-1,this.y2=this.y1+e-1,this}},{key:"offset",value:function(t,e){return this.x1+=t,this.y1+=e,this.x2+=t,this.y2+=e,this}}])&&R(e.prototype,i),t}();function N(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var $={getBestFitViewport:function(t){var e=this,i=t.x1,n=t.y1,o=t.x2+1,r=t.y2+1,a=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw r}}return i}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(this.forwardMap(i,n),2),s=a[0],l=a[1],u=new L(s,l,s,l);return[[o,n],[o,r],[i,r]].forEach((function(t){return u.expand.apply(u,N(e.forwardMap.apply(e,N(t))))})),u.fixBounds(),u}};function z(t){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Z(t,e){return(Z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var U=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=function(t,e){return!e||"object"!==z(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,G(e).call(this,t))).name="InvalidArgumentsLength",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Z(t,e)}(e,t),e}(m);function W(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw r}}return i}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Y(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function J(t,e,i){return[i[0]*t+i[1]*e+i[2],i[3]*t+i[4]*e+i[5]]}var H=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.matrix=e,this.forwardMatrix=this.constructor.invertAffineMatrix(e),this.hasPartialDerivatives=!0,this.hasConstantPartialDerivatives=!0,this.hasBestFitViewport=!0}var e,i,n;return e=t,n=[{key:"fromControlPoints",value:function(e){if(e.length%4!=0)throw new U("Number of arguments must be multiple of 4 and at least 4 arguments (1 control point) expected. ".concat(e.length," arguments given."));if(4===e.length)return new t([1,0,e[0]-e[2],0,1,e[1]-e[3]]);for(var i=new B(3,2),n=0;n<e.length;n+=4){var o=W(e.slice(n,n+4),4),r=o[0],a=o[1],s=o[2],l=o[3];i.addTerms([s,l,1],[r,a])}8===e.length&&i.addTerms([e[2]-(e[7]-e[3]),e[3]+(e[6]-e[2]),1],[e[0]-e[5]+e[1],e[1]+e[4]-e[0]]);var u=i.solve().getVectors();return new t(u[0].concat(u[1]))}},{key:"fromForwardMatrix",value:function(e){return new t(this.invertAffineMatrix(e))}},{key:"invertAffineMatrix",value:function(t){var e=O(t[0]*t[4]-t[1]*t[3]);return[e*t[4],e*-t[1],e*(t[1]*t[5]-t[2]*t[4]),e*-t[3],e*t[0],e*(t[2]*t[3]-t[0]*t[5])]}}],(i=[{key:"reverseMap",value:function(t,e){return J(t,e,this.matrix)}},{key:"getValidity",value:function(t,e){return 1}},{key:"getPartialDerivatives",value:function(t,e){return[this.matrix[0],this.matrix[1],this.matrix[3],this.matrix[4]]}},{key:"forwardMap",value:function(t,e){return J(t,e,this.forwardMatrix)}}])&&Y(e.prototype,i),n&&Y(e,n),t}();Object.assign(H.prototype,$);var X=H;function q(t){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q(t){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function K(t,e){return(K=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tt=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=function(t,e){return!e||"object"!==q(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Q(e).call(this,t))).name="InvalidArgument",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&K(t,e)}(e,t),e}(m);function et(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw r}}return i}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function it(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var nt=function(){function t(e,i,n,o,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.viewport=e,this.c0=i,this.c1=n,this.c2=o,this.c3=r,this.c4=a,this.angleToWidth=_*this.viewport.width()/this.c1,this.radiusToHeight=this.viewport.height()/this.c3,this.hasPartialDerivatives=!0,this.hasConstantPartialDerivatives=!1,this.hasBestFitViewport=!0,this.forceBestFit=!0}var e,i,n;return e=t,n=[{key:"fromArguments",value:function(e,i){if(i.length>=1&&i[0]<1e-12)throw new tt("Angle too small");if(i.length>=3&&i[2]<1e-12)throw new tt("Outer radius too small");var n,o,r,a,s;return n=-x,o=i.length>=1?I(i[0]):x,i.length>=2&&(n+=I(i[1])),n/=_,n-=Math.round(n),n*=_,a=e.height()-1,r=e.width()/o+a/2,i.length>=3&&(i.length>=4?a=i[2]-i[3]:a*=i[2]/r,r=i[2]),s=(e.width()-1)/2,new t(e,n,o,r,a,s)}}],(i=[{key:"reverseMap",value:function(t,e){var i=et(this.getUV(t,e),2),n=i[0],o=i[1];return[n=n*this.angleToWidth+this.c4+this.viewport.x1+.5,o=(this.c2-o)*this.radiusToHeight+this.viewport.y1]}},{key:"getValidity",value:function(t,e){return 1}},{key:"getPartialDerivatives",value:function(t,e){var i=et(this.getUV(t,e),2),n=(i[0],i[1]);return n>1e-12?[this.angleToWidth/(_*n),0,0,this.radiusToHeight]:[2*this.viewport.width(),0,0,this.radiusToHeight]}},{key:"getBestFitViewport",value:function(t){var e=this.c0-this.c1/2,i=Math.cos(e),n=Math.sin(e),o=this.c2*i,r=this.c2*n,a=new L(o,r,o,r);for(o=(this.c2-this.c3)*i,r=(this.c2-this.c3)*n,a.expand(o,r),e=this.c0+this.c1/2,i=Math.cos(e),n=Math.sin(e),o=this.c2*i,r=this.c2*n,a.expand(o,r),o=(this.c2-this.c3)*i,r=(this.c2-this.c3)*n,a.expand(o,r),e=Math.ceil((this.c0-this.c1/2)/x)*x;e<this.c0+this.c1/2;e+=x)i=Math.cos(e),n=Math.sin(e),o=this.c2*i,r=this.c2*n,a.expand(o,r);return a.fixBounds(),a}},{key:"getUV",value:function(t,e){var i;return i=(Math.atan2(e,t)-this.c0)/_,[i-=Math.round(i),Math.hypot(t,e)]}}])&&it(e.prototype,i),n&&it(e,n),t}();function ot(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw r}}return i}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function rt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function at(t,e,i){var n=i[0]*t+i[1]*e+i[2],o=i[3]*t+i[4]*e+i[5],r=i[6]*t+i[7]*e+1;return[n/r,o/r]}var st=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.matrix=e,this.denominator=i,this.forwardMatrix=this.constructor.invertPerspectiveMatrix(e),this.hasPartialDerivatives=!0,this.hasConstantPartialDerivatives=!1,this.hasBestFitViewport=!0}var e,i,n;return e=t,n=[{key:"fromControlPoints",value:function(e){if(e.length<16||e.length%4!=0)throw new U("Number of arguments must be multiple of 4 and at least 16 arguments (4 control points) expected. ".concat(e.length," arguments given."));for(var i=new B(8,1),n=0;n<e.length;n+=4){var o=ot(e.slice(n,n+4),4),r=o[0],a=o[1],s=o[2],l=o[3];i.addTerms([s,l,1,0,0,0,-s*r,-l*r],[r]).addTerms([0,0,0,s,l,1,-s*a,-l*a],[a])}var u=i.solve().getVectors()[0];return new t(u,u[6]*e[2]+u[7]*e[3]+1<0?-1:1)}},{key:"fromForwardMatrix",value:function(e){var i=this.invertPerspectiveMatrix(e);return new t(i,i[6]*e[2]+i[7]*e[5]+1<0?-1:1)}},{key:"invertPerspectiveMatrix",value:function(t){var e=O(t[0]*t[4]-t[3]*t[1]);return[e*(t[4]-t[7]*t[5]),e*(t[7]*t[2]-t[1]),e*(t[1]*t[5]-t[4]*t[2]),e*(t[6]*t[5]-t[3]),e*(t[0]-t[6]*t[2]),e*(t[3]*t[2]-t[0]*t[5]),e*(t[3]*t[7]-t[6]*t[4]),e*(t[6]*t[1]-t[0]*t[7])]}}],(i=[{key:"reverseMap",value:function(t,e){return at(t,e,this.matrix)}},{key:"getValidity",value:function(t,e,i){var n=this.matrix[6]*t+this.matrix[7]*e+1,o=n*this.denominator<0?0:1,r=2*Math.abs(n),a=Math.abs(this.matrix[6]),s=Math.abs(this.matrix[7]);return a>s?r<a&&(o=.5-this.denominator*n/(this.matrix[6]*i)):r<s&&(o=.5-this.denominator*n/(this.matrix[7]*i)),o}},{key:"getPartialDerivatives",value:function(t,e){var i=this.matrix[0]*t+this.matrix[1]*e+this.matrix[2],n=this.matrix[3]*t+this.matrix[4]*e+this.matrix[5],o=this.matrix[6]*t+this.matrix[7]*e+1,r=Math.pow(1/o,2);return[(o*this.matrix[0]-i*this.matrix[6])*r,(o*this.matrix[1]-i*this.matrix[7])*r,(o*this.matrix[3]-n*this.matrix[6])*r,(o*this.matrix[4]-n*this.matrix[7])*r]}},{key:"forwardMap",value:function(t,e){return at(t,e,this.forwardMatrix)}}])&&rt(e.prototype,i),n&&rt(e,n),t}();Object.assign(st.prototype,$);var lt=st,ut={Affine:X,Arc:nt,Perspective:lt},ct={InvalidArgument:tt,InvalidArgumentsLength:U,LensException:m,UnsolvableMatrix:y};function pt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ft(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var dt=function(){function t(e,i,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;pt(this,t),this.filterFunction=e,this.windowingFunction=i,this.support=n,this.scale=o,this.blur=r,this.windowSupport=null!==a?a:n}var e,i;return e=t,(i=[{key:"getWeight",value:function(t){var e=t/this.blur;return(e<1e-12?1:this.window(this.scale*e))*this.filter(e)}},{key:"filter",value:function(t){return this.filterFunction(t,this.support,this.windowSupport)}},{key:"window",value:function(t){return this.windowingFunction(t,this.support,this.windowSupport)}}])&&ft(e.prototype,i),t}();function ht(){var t=function(){return 1};return t.filterFunctionName="box",t}function mt(t,e){var i=(6-2*t)/6,n=(12*t-18+6*e)/6,o=(12-9*t-6*e)/6,r=(8*t+24*e)/6,a=(-12*t-48*e)/6,s=(6*t+30*e)/6,l=(-1*t-6*e)/6,u=function(t){return t<1?i+t*(t*(n+t*o)):t<2?r+t*(a+t*(s+t*l)):0};return u.filterFunctionName="cubicBC",u.b=t,u.c=e,u}var bt={Filter:dt,filterFunctions:o},gt={BACKGROUND:1,EDGE:3,MIRROR:4,RANDOM:5,TILE:6,TRANSPARENT:7,BLACK:9,GRAY:10,WHITE:11,HORIZONTAL_TILE:12,VERTICAL_TILE:13,HORIZONTAL_TILE_EDGE:14,VERTICAL_TILE_EDGE:15};function vt(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function yt(t,e,i,n){return[Math.max(0,Math.min(i-1,t)),Math.max(0,Math.min(n-1,e))]}function wt(t,e,i,n){var o=t%i,r=e%n;return[o<0?i+o:o,r<0?n+r:r]}var xt={getVirtualPixelColor:function(t,e,i){switch(i){case gt.BACKGROUND:return this.backgroundColor.slice();case gt.EDGE:return this.getImagePixelColor.apply(this,vt(yt(t,e,this.width,this.height)));case gt.MIRROR:var n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw r}}return i}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(wt(t,e,2*this.width,2*this.height),2),o=n[0],r=n[1];return o>this.width-1&&(o=this.width-(o-this.width)-1),r>this.height-1&&(r=this.height-(r-this.height)-1),this.getImagePixelColor(o,r);case gt.TILE:return this.getImagePixelColor.apply(this,vt(wt(t,e,this.width,this.height)));case gt.TRANSPARENT:default:return[0,0,0,0];case gt.BLACK:return[0,0,0,this.quantumRange];case gt.WHITE:return new Array(4).fill(this.quantumRange);case gt.GRAY:return new Array(3).fill(Math.round(this.quantumRange/2)).concat([this.quantumRange]);case gt.HORIZONTAL_TILE:case gt.HORIZONTAL_TILE_EDGE:return e<0||e>=this.height?i===gt.HORIZONTAL_TILE?this.backgroundColor.slice():this.getImagePixelColor.apply(this,vt(yt(t,e,this.width,this.height))):this.getImagePixelColor.apply(this,vt(wt(t,e,this.width,this.height)));case gt.VERTICAL_TILE:case gt.VERTICAL_TILE_EDGE:return t<0||t>=this.width?i===gt.VERTICAL_TILE?this.backgroundColor.slice():this.getImagePixelColor.apply(this,vt(yt(t,e,this.width,this.height))):this.getImagePixelColor.apply(this,vt(wt(t,e,this.width,this.height)));case gt.RANDOM:return this.getImagePixelColor(Math.floor(Math.random()*this.width),Math.floor(Math.random()*this.height))}}},_t={AVERAGE:1,AVERAGE_9:2,AVERAGE_16:3,BACKGROUND:4,INTEGER:8},Ot={getInterpolatedPixelColor:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.interpolationMethod;switch(i){case _t.AVERAGE:return this.interpolateAverage(t,e,2);case _t.AVERAGE_9:return this.interpolateAverage(t,e,3);case _t.AVERAGE_16:return this.interpolateAverage(t,e,4);case _t.BACKGROUND:return this.backgroundColor.slice();case _t.INTEGER:default:return this.getPixelColor(Math.floor(t),Math.floor(e))}},interpolateAverage:function(t,e){var i,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;switch(o){case 2:i=Math.floor(t),n=Math.floor(e);break;case 3:i=Math.floor(t+.5)-1,n=Math.floor(e+.5)-1;break;case 4:i=Math.floor(t)-1,n=Math.floor(e)-1;break;default:throw new Error("Param 'count' must be integer between 2 and 4.")}for(var r=i+o,a=n+o,s=[0,0,0,0],l=n;l<a;l++)for(var u=i;u<r;u++)this.getPixelColor(t,e).forEach((function(t,e){return s[e]+=t}));var c=1/(o*o);return s.map((function(t){return Math.round(t*c)}))}};function Vt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ct(t){throw new Error("".concat(t,"() is abstract method and must be implemented by child class"))}var It=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=e,this.height=i,this.viewport=new L(0,0,this.width-1,this.height-1),this.backgroundColor=[0,0,0,0],this.virtualPixelMethod=gt.TRANSPARENT,this.quantumRange=255,this.interpolationMethod=_t.INTEGER}var e,i;return e=t,(i=[{key:"getPixelColor",value:function(t,e){return t=Math.floor(t-this.viewport.x1),e=Math.floor(e-this.viewport.y1),t>=0&&t<this.width&&e>=0&&e<this.height?this.getImagePixelColor(t,e):this.getVirtualPixelColor(t,e,this.virtualPixelMethod)}},{key:"setPixelColor",value:function(t,e,i){if(t=Math.floor(t-this.viewport.x1),e=Math.floor(e-this.viewport.y1),t>=0&&t<this.width&&e>=0&&e<this.height)return this.setImagePixelColor(t,e,i),this;throw new Error("Given coords (".concat(t,", ").concat(e,") is out of image bounds"))}},{key:"getBlank",value:function(t){var e=this.prepareBlank(t.width(),t.height());return e instanceof Promise?e.then((function(e){return e.viewport=t,e})):(e.viewport=t,e)}},{key:"scale",value:function(t){var e=this.viewport.clone();e.scale(t);var i=this.resize(e.width(),e.height());return i instanceof Promise?i.then((function(){return i.viewport=e,i})):(i.viewport=e,i)}},{key:"sync",value:function(){return this}},{key:"getImagePixelColor",value:function(t,e){Ct("getImagePixelColor")}},{key:"setImagePixelColor",value:function(t,e,i){Ct("setImagePixelColor")}},{key:"prepareBlank",value:function(t,e){Ct("prepareBlank")}},{key:"getAverageColor",value:function(){Ct("getAverageColor")}},{key:"resize",value:function(t,e){Ct("resize")}}])&&Vt(e.prototype,i),t}();Object.assign(It.prototype,xt),Object.assign(It.prototype,Ot);var Pt=It;function St(t){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function At(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kt(t){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ft(t,e){return(Ft=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Mt=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=function(t,e){return!e||"object"!==St(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,kt(e).call(this,t.width,t.height))).canvas=t,i.imageData=t.getContext("2d").getImageData(0,0,t.width,t.height),i.data=i.imageData.data,i}var i,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ft(t,e)}(e,t),i=e,(n=[{key:"getImagePixelColor",value:function(t,e){var i=4*(e*this.width+t);return Array.prototype.slice.call(this.data,i,i+4)}},{key:"setImagePixelColor",value:function(t,e,i){var n=this,o=4*(e*this.width+t);i.forEach((function(t,e){return n.data[o+e]=t}))}},{key:"prepareBlank",value:function(t,e){var i=document.createElement("canvas");return i.width=t,i.height=e,new this.constructor(i)}},{key:"sync",value:function(){return this.canvas.getContext("2d").putImageData(this.imageData,0,0),this}},{key:"getAverageColor",value:function(){var t=document.createElement("canvas");return t.width=1,t.height=1,t.getContext("2d").drawImage(this.canvas,0,0,this.width,this.height,0,0,1,1),Array.prototype.slice.call(t.getContext("2d").getImageData(0,0,1,1).data)}},{key:"resize",value:function(t,e){var i=document.createElement("canvas");return i.width=t,i.height=e,i.getContext("2d").drawImage(this.canvas,0,0,this.width,this.height,0,0,t,e),new this.constructor(i)}}])&&At(i.prototype,n),e}(Pt);function Tt(t){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Et(t,e,i){return(Et="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Dt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(i):o.value}})(t,e,i||t)}function Dt(t){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bt(t,e){return(Bt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Rt={AbstractImage:Pt,Canvas:Mt,DomImage:function(t){function e(t){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=document.createElement("canvas");return n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(t,0,0),(i=function(t,e){return!e||"object"!==Tt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Dt(e).call(this,n))).image=t,i}var i,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bt(t,e)}(e,t),i=e,(n=[{key:"prepareBlank",value:function(t,e){return new this.constructor(new Image(t,e))}},{key:"sync",value:function(){var t=this;return Et(Dt(e.prototype),"sync",this).call(this),new Promise((function(e){t.image.onload=function(){return e(t)},t.image.src=t.canvas.toDataURL()}))}},{key:"resize",value:function(t,e){var i=this;return this.sync().then((function(){return new Promise((function(n){var o=document.createElement("canvas");o.width=t,o.height=e,o.getContext("2d").drawImage(i.image,0,0,i.width,i.height,0,0,t,e);var r=new Image(t,e);r.onload=function(){var t=new i.constructor(r);n(t)},r.src=o.toDataURL()}))}))}}])&&jt(i.prototype,n),e}(Mt)},Lt={createsBestFitViewportFromApexes:$,interpolationTrait:Ot,virtualPixelTrait:xt};function Nt(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function $t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw r}}return i}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function zt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Gt(t,e){return Math.max(0,Math.min(e,t))}function Zt(t,e,i,n){var o=t*t+e*e,r=t*i+e*n,a=r,s=i*i+n*n,l=t*n-e*i,u=l+l,c=o+s,p=(c+u)*(c-u),f=Math.sqrt(p>0?p:0),d=.5*(c+f),h=.5*(c-f),m=d-o,b=d-s,g=m*m,v=b*b,y=g>=v?r:b,w=g>=v?m:a,x=Math.sqrt(y*y+w*w),_=x>0?y/x:1,O=x>0?w/x:0,V=d<=1?1:Math.sqrt(d),C=h<=1?1:Math.sqrt(h);return[_*V,O*V,-O*C,_*C,V,C]}var Ut=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resizeFilter=e,this.support=this.resizeFilter.support*this.resizeFilter.blur,this.matteColor=[0,0,0,0],this.weightLookupTable=function(t,e){for(var i=[],n=e*Math.sqrt(1/1024),o=0;o<1024;o++)i[o]=t.getWeight(Math.sqrt(o)*n);return i}(this.resizeFilter,this.support),this.image=null,this.mapper=null,this.imageViewport=null,this.imageArea=null,this.imageVirtualPixelMethod=null,this.imageAverageColor=null,this.A=0,this.B=0,this.C=0,this.F=0,this.uLimit=0,this.vLimit=0,this.uWidth=0,this.slope=0,this.ellipseIsSetUp=!1,this.limitReached=!1,this.scaling=1}var e,i;return e=t,(i=[{key:"getResampledColor",value:function(t,e){t*=this.scaling,e*=this.scaling;var i=this.mapper.getValidity(t,e,this.scaling);if(i>0){var n=$t(this.mapper.reverseMap(t,e),2),o=n[0],r=n[1];this.mapper.hasConstantPartialDerivatives?this.setupEllipseOnce.apply(this,Nt(this.mapper.getPartialDerivatives(t,e))):this.setupEllipse.apply(this,Nt(this.mapper.getPartialDerivatives(t,e)));var a=this.getWeightedAverage(o,r);return i<1?V(a,i,this.matteColor):a}return this.matteColor.slice()}},{key:"setImage",value:function(t){return this.image=t,this.imageViewport=this.image.viewport,this.imageArea=this.imageViewport.area(),this.imageVirtualPixelMethod=this.image.virtualPixelMethod,this.imageAverageColor=null,this}},{key:"setMapper",value:function(t){if(!t.hasPartialDerivatives)throw new Error("Pixel mapper must have partial derivatives to use this resampler");return this.mapper=t,this.ellipseIsSetUp=!1,this}},{key:"setupEllipseOnce",value:function(){return this.ellipseIsSetUp?this:(this.ellipseIsSetUp=!0,this.setupEllipse.apply(this,arguments))}},{key:"setupEllipse",value:function(){for(var t=this,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return this.limitReached=!1,i=i.map((function(e){return e*t.scaling})),this.initEllipse.apply(this,Nt(i)).scaleEllipse()}},{key:"initEllipse",value:function(){var t=Zt.apply(void 0,arguments),e=$t(t,6),i=e[0],n=e[1],o=e[2],r=e[3],a=e[4],s=e[5];return this.A=n*n+r*r,this.B=-2*(i*n+o*r),this.C=i*i+o*o,this.F=a*s,this.F*=this.F,this.limitReached=4*this.A*this.C-this.B*this.B>w,this}},{key:"scaleEllipse",value:function(){if(!this.limitReached){if(this.F*=this.support*this.support,this.uLimit=Math.sqrt(this.C*this.F/(this.A*this.C-.25*this.B*this.B)),this.vLimit=Math.sqrt(this.A*this.F/(this.A*this.C-.25*this.B*this.B)),this.uWidth=Math.sqrt(this.F/this.A),this.slope=-this.B/(2*this.A),this.uWidth*this.vLimit>4*this.imageArea)return this.limitReached=!0,this;var t=1024/this.F;this.A*=t,this.B*=t,this.C*=t}return this}},{key:"getWeightedAverage",value:function(t,e){if(this.doesntNeedResampling(t,e))return this.image.getPixelColor(t,e);if(this.limitReached)switch(this.imageVirtualPixelMethod){case gt.EDGE:case gt.HORIZONTAL_TILE_EDGE:case gt.VERTICAL_TILE_EDGE:return this.image.getInterpolatedPixelColor(t,e,_t.AVERAGE);case gt.HORIZONTAL_TILE:case gt.VERTICAL_TILE:return this.image.getPixelColor(this.imageViewport.x1-1,this.imageViewport.y1-1);default:return this.getImageAverageColor()}for(var i=0,n=0,o=0,r=0,a=0,s=0,l=Math.ceil(e-this.vLimit),u=Math.floor(e+this.vLimit),c=t+(l-e)*this.slope-this.uWidth,p=2*this.uWidth+1,f=2*this.A,d=l;d<u;d++){var h=Math.ceil(c);c+=this.slope;for(var m=h+p,b=h-t,g=d-e,v=(this.A*b+this.B*g)*b+this.C*g*g,y=this.A*(2*b+1)+this.B*g,w=h;w<m;w++){if(v<1024){var x=this.weightLookupTable[Math.floor(v)],_=$t(this.image.getPixelColor(w,d),4),O=_[0],V=_[1],C=_[2],I=_[3];s+=x*I,i+=x,o+=O*(x*=I/this.image.quantumRange),r+=V*x,a+=C*x,n+=x}v+=y,y+=f}}return n&&i?[Gt(Math.round(o/n),this.image.quantumRange),Gt(Math.round(r/n),this.image.quantumRange),Gt(Math.round(a/n),this.image.quantumRange),Gt(Math.round(s/i),this.image.quantumRange)]:this.image.getInterpolatedPixelColor(t,e)}},{key:"doesntNeedResampling",value:function(t,e){switch(this.imageVirtualPixelMethod){case gt.TRANSPARENT:case gt.BACKGROUND:case gt.BLACK:case gt.WHITE:case gt.GRAY:return this.limitReached||this.outOfImageBounds(t,e);case gt.EDGE:return t+this.uLimit<this.imageViewport.x1&&e+this.vLimit<this.imageViewport.y1||t+this.uLimit<this.imageViewport.x1&&e-this.vLimit>this.imageViewport.y2||t-this.uLimit>this.imageViewport.x2&&e+this.vLimit<this.imageViewport.y1||t-this.uLimit>this.imageViewport.x2&&e-this.vLimit>this.imageViewport.y2;case gt.HORIZONTAL_TILE:return e+this.vLimit<this.imageViewport.y1||e-this.vLimit>this.imageViewport.y2;case gt.VERTICAL_TILE:return t+this.uLimit<this.imageViewport.x1||t-this.uLimit>this.imageViewport.x2;default:return!1}}},{key:"getImageAverageColor",value:function(){return null===this.imageAverageColor&&(this.imageAverageColor=this.image.getAverageColor()),this.imageAverageColor.slice()}},{key:"outOfImageBounds",value:function(t,e){return t+this.uLimit<this.imageViewport.x1||t-this.uLimit>this.imageViewport.x2||e+this.vLimit<this.imageViewport.y1||e-this.vLimit>this.imageViewport.y2}}])&&zt(e.prototype,i),t}();function Wt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Yt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.matteColor=[0,0,0,0],this.scaling=1}var e,i;return e=t,(i=[{key:"setImage",value:function(t){return this.image=t,this}},{key:"setMapper",value:function(t){return this.mapper=t,this}},{key:"getResampledColor",value:function(t,e){t*=this.scaling,e*=this.scaling;var i=this.mapper.getValidity(t,e,this.scaling);if(i>0){var n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw r}}return i}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(this.mapper.reverseMap(t,e),2),o=n[0],r=n[1],a=this.image.getInterpolatedPixelColor(o,r);return i<1?V(a,this.matteColor,i):a}return this.matteColor.slice()}}])&&Wt(e.prototype,i),t}(),Jt={EWA:Ut,Point:Yt};function Ht(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Xt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var qt=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ht(Object(i),!0).forEach((function(e){Xt(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ht(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},n,{gaussJordanElimination:{Solver:k,LeastSquares:B}}),Qt={ROBIDOUX:function(){return new dt(mt(.3782157550939987,.3108921224530007),ht(),2,1.1685777620836932,1)},ROBIDOUX_SHARP:function(){return new dt(mt(.2620145123990142,.3689927438004929),ht(),2,1.105822933719019,1)}},Kt={bestFit:!1,filter:Qt.ROBIDOUX,resample:!0,async:!0,outputScaling:1};function te(t){return t instanceof Promise?t.then((function(t){return te(t)})):"sync"in t&&"function"==typeof t.sync?t.sync():t}function ee(t,e){return t instanceof Promise?t.then((function(t){return ee(t,e)})):"scale"in t&&"function"==typeof t.scale?t.scale(e):(console.warn("Method 'scale()' not found in image object. No scaling performed."),t)}function ie(t){return(t=Object.assign({},Kt,t)).supersample&&(t.outputScaling=t.supersample),t}function ne(t,e,i,n){var o=new a(t,e,i);return o.async=!!n.async,o.bestFit=!!n.bestFit,n.viewport&&(o.viewport=n.viewport),n.outputScaling&&(o.outputScaling=n.outputScaling,n.supersample&&(o.supersample=!0)),o}function oe(t,e,i){var n;return n=i.resampler?i.resampler:i.resample?new Ut(function(t){return"function"==typeof t.filter?t.filter():t.filter}(i)):new Yt,i.matteColor&&(n.matteColor=i.matteColor.slice()),n}var re={AFFINE:function(t){return X.fromControlPoints(t)},AFFINE_PROJECTION:function(t){var e=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw r}}return i}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(t,6),i=e[0],n=e[1],o=e[2],r=e[3],a=e[4],s=e[5];return X.fromForwardMatrix([i,o,a,n,r,s])},PERSPECTIVE:function(t){return t.length<16?(console.warn("Perspective distortion requires at least 4 controls points mapping (u, v) -> (x, y). Affine distortion will be used."),X.fromControlPoints(t)):lt.fromControlPoints(t)},PERSPECTIVE_PROJECTION:function(t){return lt.fromForwardMatrix(t)},ARC:function(t,e){return nt.fromArguments(e.viewport,t)}},ae={VERSION:"0.1.0",EPSILON:1e-12,MAXIMUM_VALUE:w,M_2PI:_,M_PI2:x,distorts:re,filterPresets:Qt,interpolation:_t,vpx:gt,Viewport:L,distorter:s,distortion:ut,exception:ct,filter:bt,image:Rt,mixins:Lt,resampler:Jt,util:qt,distort:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{"function"==typeof e?e=e(i,t):n=i||{},n=ie(n),e.forceBestFit&&(n.bestFit=!0);var o=te(ne(t,e,oe(0,0,n),n).distort());return n.supersample&&1!==n.supersample?ee(o,1/n.supersample):o}catch(t){if(n&&n.async)return Promise.reject(t);throw t}},registerDistortionResolver:function(t,e){re[t]=e},unregisterDistortionResolver:function(t){delete re[t]}};e.default=ae}]).default},455:function(t,e,i){var n=i(237),o=i(463);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var r={insert:"head",singleton:!1},a=(n(o,r),o.locals?o.locals:{});t.exports=a},456:function(t,e,i){var n=i(465);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(12).default)("eef6fb24",n,!1,{})},457:function(t,e,i){var n=i(467);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(12).default)("26fa4ad6",n,!1,{})},458:function(t,e,i){var n=i(469);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(12).default)("4cb2efc7",n,!1,{})},459:function(t,e,i){var n=i(471);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(12).default)("6eb086a4",n,!1,{})},462:function(t,e,i){"use strict";var n=i(455);i.n(n).a},463:function(t,e,i){(e=i(9)(!1)).push([t.i,"\n.file-selection-area__label[data-v-3557c134] {\n    display: block;\n    width: 100%;\n    height: 100%;\n    cursor: pointer;\n}\n.file-selection-area__file-input[data-v-3557c134] {\n    opacity: 0;\n    width: 1px;\n    height: 1px;\n    position: absolute;\n}\n.file-selection-area__drop-zone[data-v-3557c134] {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.3);\n    z-index: 999;\n    padding: 20px;\n    -webkit-box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n}\n.file-selection-area__drop-zone-inner[data-v-3557c134] {\n    border: 2px dashed royalblue;\n    height: 100%;\n}\n",""]),t.exports=e},464:function(t,e,i){"use strict";var n=i(456);i.n(n).a},465:function(t,e,i){(e=i(9)(!1)).push([t.i,".image-viewer[data-v-617039a8]{position:relative;cursor:grab}.image-viewer.panning[data-v-617039a8]{cursor:grabbing}.image-viewer__image[data-v-617039a8]{position:absolute}",""]),t.exports=e},466:function(t,e,i){"use strict";var n=i(457);i.n(n).a},467:function(t,e,i){(e=i(9)(!1)).push([t.i,".image-area[data-v-42808a23]{flex-basis:100%;flex-direction:column}.image-area__image-plane.crosshair[data-v-42808a23]{cursor:crosshair}.image-area__viewport[data-v-42808a23]{position:relative}.image-area__viewport .image-area__axis[data-v-42808a23]{position:absolute;background-color:#7fffd4}.image-area__viewport .image-area__axis.x-axis[data-v-42808a23]{top:0;height:100%;width:1px;margin-left:-0.5px}.image-area__viewport .image-area__axis.y-axis[data-v-42808a23]{left:0;width:100%;height:1px;margin-top:-0.5px}",""]),t.exports=e},468:function(t,e,i){"use strict";var n=i(458);i.n(n).a},469:function(t,e,i){(e=i(9)(!1)).push([t.i,".transparent-backdrop[data-v-cb6e9518]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0I2OTM4MUI0QzA3MTFFQTk5ODI5NEYwRTg3RDIzMDQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0I2OTM4MUM0QzA3MTFFQTk5ODI5NEYwRTg3RDIzMDQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3QjY5MzgxOTRDMDcxMUVBOTk4Mjk0RjBFODdEMjMwNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3QjY5MzgxQTRDMDcxMUVBOTk4Mjk0RjBFODdEMjMwNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgAiQgsAAABWSURBVHjaYmRgYJBiQAJCQkJMb9++1WNAA0zoAt+/f//PgAUwMRAJMBRKSkoyY1PIIiUlxfzjx4//UEVMV69e/YNNIeP///+9MAQZGS9Qz430UwgQYAAyfBOo6ecabAAAAABJRU5ErkJggg==);background-repeat:repeat;width:100%;height:20px;margin-top:10px;border:#aaa 1px solid}.transparent-backdrop .color-sample[data-v-cb6e9518]{width:100%;height:100%;cursor:pointer}.transparent-backdrop .color-sample.disabled[data-v-cb6e9518]{cursor:default}[data-v-cb6e9518] .v-label{transform-origin:top left;transform:translateY(-10px) scale(0.75);position:absolute !important;left:0}",""]),t.exports=e},470:function(t,e,i){"use strict";var n=i(459);i.n(n).a},471:function(t,e,i){(e=i(9)(!1)).push([t.i,".relative-wrapper[data-v-d9410534]{position:relative;max-height:100%;height:100%;width:100%}.relative-wrapper .absolute-wrapper[data-v-d9410534]{position:absolute;top:0;left:0;width:100%;height:100%;overflow-y:auto}",""]),t.exports=e},477:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("VContainer",{attrs:{fluid:"","fill-height":"","align-stretch":""}},[t.sourceImage||t.showLoading?i("VRow",{staticClass:"fill-height",attrs:{dense:""}},[i("VCol",{attrs:{cols:"12",md:"8",lg:"9"}},[t.sourceImage?i("ImageArea",{staticClass:"fill-height",attrs:{"source-image":t.sourceImage,"distorted-image":t.distortedImage,"initial-viewport-offset":t.imageOptions.initialViewportOffset,crosshair:null!==t.waitingForPoint},on:{"plane-click":t.onImagePlaneClick}}):t._e()],1),t._v(" "),i("VCol",{staticClass:"d-none d-md-flex",attrs:{cols:"12",md:"4",lg:"3"}},[i("div",{staticClass:"relative-wrapper"},[i("div",{staticClass:"absolute-wrapper"},[i("VTabs",{model:{value:t.inputOutputTab,callback:function(e){t.inputOutputTab=e},expression:"inputOutputTab"}},[i("VTab",[t._v("Input Settings")]),t._v(" "),i("VTab",{attrs:{disabled:t.isOutputTabDisabled}},[t._v("Output Info")]),t._v(" "),i("VTabItem",[i("VCard",[i("VCardText",[i("portal",{attrs:{to:"mobileInputSettings",disabled:!t.isMobile}},[i("InputSettings",{attrs:{"source-image":t.sourceImage,"image-options":t.imageOptions,distortion:t.distortion,"distortion-options":t.options,"args-active-offset":t.waitingForPoint,disabled:t.showLoading},on:{"update:imageOptions":function(e){t.imageOptions=e},"update:image-options":function(e){t.imageOptions=e},"update:distortion":function(e){t.distortion=e},"update:distortionOptions":function(e){t.options=e},"update:distortion-options":function(e){t.options=e},"change-image":t.onFileSelected,"pick-point":t.onPickPoint,"pick-point-cancel":t.onPickPointCancel}})],1)],1)],1)],1),t._v(" "),i("VTabItem",[t.hasDistortionResult?i("VCard",[i("VCardText",[i("portal",{attrs:{to:"mobileOutputInfo",disabled:!t.isMobile}},[i("OutputInfo",{staticClass:"mt-2",attrs:{"processing-time":t.distortionTime,"distorted-viewport":t.distortedViewport},on:{"use-distorted-as-source":t.onUseDistortedAsSource}})],1)],1)],1):t._e()],1)],1)],1)])])],1):i("FileSelectionArea",{staticClass:"fill-height d-flex",staticStyle:{width:"100%"},on:{input:t.onFileSelected}},[i("div",{staticClass:"d-flex align-content-center fill-height justify-center align-center"},[i("p",{staticClass:"text-center"},[i("VIcon",{attrs:{size:"100"}},[t._v("mdi-image")]),t._v(" "),i("br"),t._v(" "),t.isMobile?[t._v("\n                    Tap to select image\n                ")]:[t._v("\n                    Drag image here or click to select\n                ")]],2)])]),t._v(" "),t.isMobile?i("VDialog",{attrs:{fullscreen:"",transition:"dialog-bottom-transition",scrollable:""},model:{value:t.showMobileInputSettings,callback:function(e){t.showMobileInputSettings=e},expression:"showMobileInputSettings"}},[i("VCard",[i("VToolbar",[i("VBtn",{attrs:{icon:""},on:{click:function(e){return e.stopPropagation(),t.closeInputSettingsDialog(e)}}},[i("VIcon",[t._v("mdi-close")])],1),t._v(" "),i("VToolbarTitle",[t._v("Input Settings")])],1),t._v(" "),i("VCardText",[i("PortalTarget",{attrs:{name:"mobileInputSettings"}})],1),t._v(" "),i("VCardActions",[i("VBtn",{attrs:{color:"primary"},on:{click:function(e){return e.stopPropagation(),t.onDistortBtnClick(e)}}},[i("VIcon",[t._v("mdi-camera-iris")]),t._v(" Distort\n                ")],1)],1)],1)],1):t._e(),t._v(" "),t.isMobile?i("VDialog",{attrs:{fullscreen:"",transition:"dialog-bottom-transition"},model:{value:t.showMobileOutputInfo,callback:function(e){t.showMobileOutputInfo=e},expression:"showMobileOutputInfo"}},[i("VCard",[i("VToolbar",[i("VBtn",{attrs:{icon:""},on:{click:function(e){return e.stopPropagation(),t.closeOutputInfoDialog(e)}}},[i("VIcon",[t._v("mdi-close")])],1),t._v(" "),i("VToolbarTitle",[t._v("Output Info")])],1),t._v(" "),i("VCardText",[i("PortalTarget",{attrs:{name:"mobileOutputInfo"}})],1)],1)],1):t._e(),t._v(" "),i("DistortionButton",{directives:[{name:"show",rawName:"v-show",value:t.isSourceImageLoaded,expression:"isSourceImageLoaded"}],attrs:{mobile:t.isMobile,loading:t.performingDistortion,"show-output-info":t.hasDistortionResult},on:{distort:t.onDistortBtnClick,"show-input-settings":t.openInputSettingsDialog,"show-output-info":t.openOutputInfoDialog}}),t._v(" "),t.showLoading?i("VOverlay",[i("VProgressCircular",{attrs:{indeterminate:"",size:"100"}})],1):t._e()],1)};n._withStripped=!0;i(50);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"file-selection-area"},[i("label",{staticClass:"file-selection-area__label",attrs:{for:t.id}},[i("input",{ref:"input",staticClass:"file-selection-area__file-input",attrs:{type:"file",id:t.id,accept:"image/jpeg,image/png,image/gif",multiple:t.multiple,disabled:t.disabled},on:{change:t.onFileInputChange}}),t._v(" "),t._t("default",null,{click:t.openFileDialog})],2),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.displayDropZone,expression:"displayDropZone"}],staticClass:"file-selection-area__drop-zone",on:{dragenter:function(e){return e.preventDefault(),t.onDropZoneDragenter(e)},dragover:function(e){return e.preventDefault(),t.onDropZoneDragover(e)},drop:function(e){return e.preventDefault(),e.stopPropagation(),t.onDrop(e)},dragleave:function(e){return e.preventDefault(),t.onDropzoneDragleave(e)}}},[i("div",{ref:"drop_zone",staticClass:"file-selection-area__drop-zone-inner"},[t._t("drop-zone")],2)])])};o._withStripped=!0;i(5);var r={name:"FileSelectionArea",props:{id:String,multiple:Boolean,disabled:Boolean},data:function(){return{files:[],displayDropZone:!1,dragenterCounter:0}},created:function(){var t=this;this.onDocDragEnter=function(e){t.disabled||function(t){if(!("items"in t.dataTransfer))return!0;for(var e,i=0;e=t.dataTransfer.items[i];i++)if("file"===e.kind.toLowerCase())return!0;return!1}(e)&&t.showDropZone()}},mounted:function(){document.addEventListener("dragenter",this.onDocDragEnter)},beforeDestroy:function(){document.removeEventListener("dragenter",this.onDocDragEnter)},methods:{openFileDialog:function(){this.$refs.input.click()},onFileInputChange:function(t){this.handleFileSelection(t.target.files)},handleFileSelection:function(t){this.disabled||(t?(this.files=Array.prototype.filter.call(t,(function(t){return/image\/jpe?g|png/.test(t.type)})),this.files.length||(this.files=null)):this.files=null,this.$emit("input",this.files))},onDropZoneDragover:function(t){t.preventDefault()},onDropZoneDragenter:function(t){this.dragenterCounter++},onDropzoneDragleave:function(t){this.dragenterCounter--,this.dragenterCounter||this.hideDropZone()},onDrop:function(t){this.hideDropZone(),this.dragenterCounter=0,this.handleFileSelection(t.dataTransfer.files)},showDropZone:function(){this.displayDropZone=!0},hideDropZone:function(){this.displayDropZone=!1}}},a=(i(462),i(129)),s=Object(a.a)(r,o,[],!1,null,"3557c134",null);s.options.__file="src/js/components/file-selection-area/index.vue";var l=s.exports,u=(i(17),i(131),i(236),i(452)),c=i.n(u),p={data:function(){return{options:{resample:!0,filterPreset:"ROBIDOUX",customFilterOptions:{filterFunc:"cubicBC",filterFuncCubicBC_b:.3782157550939987,filterFuncCubicBC_c:.3108921224530007,windowFunc:"box",windowFuncCubicBC_b:0,windowFuncCubicBC_c:0,support:2,scale:1.1685777620836932,blur:1,windowSupport:2},supersample:!1,matteColor:[0,0,0,0],bestFit:!0,useCustomViewport:!1,customViewport:{x1:0,y1:0,x2:0,y2:0}}}},methods:{buildDistortionOptions:function(){var t={resample:this.options.resample,filter:this.buildFilter(),supersample:this.options.supersample,matteColor:this.options.matteColor,bestFit:this.options.bestFit};return this.options.useCustomViewport&&(t.viewport=new c.a.Viewport(this.options.customViewport.x1,this.options.customViewport.y1,this.options.customViewport.x2,this.options.customViewport.y2)),t},buildFilter:function(){return"CUSTOM"!==this.options.filterPreset?c.a.filterPresets[this.options.filterPreset]:new c.a.filter.Filter(this.buildFilterFunction(),this.buildWindowFunction(),this.options.customFilterOptions.support,this.options.customFilterOptions.scale,this.options.customFilterOptions.blur,this.options.customFilterOptions.windowSupport)},buildFilterFunction:function(){var t=this.options.customFilterOptions.filterFunc;switch(t){case"cubicBC":return c.a.filter.filterFunctions.cubicBC(this.options.customFilterOptions.filterFuncCubicBC_b,this.options.customFilterOptions.filterFuncCubicBC_c);default:return c.a.filter.filterFunctions[t]()}},buildWindowFunction:function(){var t=this.options.customFilterOptions.windowFunc;switch(t){case"cubicBC":return c.a.filter.filterFunctions.cubicBC(this.options.customFilterOptions.windowFuncCubicBC_b,this.options.customFilterOptions.windowFuncCubicBC_c);default:return c.a.filter.filterFunctions[t]()}}}},f=(i(238),i(156),c.a.distorts),d={data:function(){return{distortion:{name:"AFFINE",args:[0,0,0,0]}}},methods:{buildDistortion:function(t){return f[this.distortion.name](this.distortion.args,t)},setControlPoint:function(t,e,i){this.distortion.args.splice(i,2,t,e)}},watch:{"distortion.name":function(t){switch(t){case"AFFINE":this.distortion.args=[0,0,0,0];break;case"AFFINE_PROJECTION":this.distortion.args=[1,0,0,1,0,0];break;case"PERSPECTIVE":this.distortion.args=new Array(16).fill(0);break;case"PERSPECTIVE_PROJECTION":this.distortion.args=[1,0,0,0,1,0,0,0];break;case"ARC":this.distortion.args=[90,0]}}}},h=c.a.interpolation,m=c.a.vpx,b=c.a.image,g={mixins:[p,d,{data:function(){return{imageOptions:{interpolationMethod:h.AVERAGE,virtualPixelMethod:m.TRANSPARENT,backgroundColor:[0,0,0,0],initialViewportOffset:{x:0,y:0}}}},methods:{buildImageObject:function(t){var e=new b.DomImage(t);e.interpolationMethod=this.imageOptions.interpolationMethod,e.virtualPixelMethod=this.imageOptions.virtualPixelMethod,e.backgroundColor=this.imageOptions.backgroundColor;var i=this.imageOptions.initialViewportOffset,n=i.x,o=i.y;return e.viewport.offset(n,o),e}}}],data:function(){return{distortedImage:null,performingDistortion:!1,distortionTime:null}},methods:{performDistortion:function(t){var e=this.buildImageObject(t);try{var i=this.buildDistortion(e)}catch(t){return Promise.reject(t)}return c.a.distort(e,i,this.buildDistortionOptions())},distort:function(t){var e=this;this.clearDistortionData(),this.performingDistortion=!0;var i=(new Date).getTime();return this.performDistortion(t).then((function(t){e.distortionTime=(new Date).getTime()-i,e.distortedImage=t})).finally((function(){return e.performingDistortion=!1}))},clearDistortionData:function(){this.distortedImage=null,this.distortionTime=null}}},v=(i(6),i(51),i(111),i(4),i(36),i(69),i(7),i(416));function y(t){return function(e){Object(v.isEqual)(e,this[t])||this.$emit("update:"+Object(v.kebabCase)(t),Object(v.cloneDeep)(e))}}function w(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}function x(t){var e=t.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase();return{get:function(){return this[t]},set:function(t){this.$emit("update:".concat(e),t)}}}function _(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"proxy",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return t.reduce((function(t,n){i.indexOf(n)<0&&(t[e+n.charAt(0).toUpperCase()+n.substring(1)]=x(n));return t}),{})}function O(t){return new Promise((function(e,i){var n=new Image;n.onload=function(){return e(n)},n.onerror=function(){return i(new Error("Couldn't preload image"))},n.src=t}))}var V={data:function(){return{sourceImage:null,loadingImage:!1,loadingImageProgress:null}},methods:{loadImageFile:function(t){var e,i,n=this;this.sourceImage=null,this.loadingImage=!0,this.loadingImageProgress=0,(e=t,i=function(t){return n.loadingImageProgress=t},new Promise((function(t,n){var o=new FileReader;o.onloadend=function(){return t(o.result)},o.onerror=function(){return n(o.error)},i&&(o.onprogress=function(t){var n=t.loaded,o=e.size;i(n/o,n,o)}),o.readAsDataURL(e)}))).then(O).then((function(t){return n.sourceImage=t})).finally((function(){n.loadingImage=!1,n.loadingImageProgress=null}))}}},C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("VCard",{staticClass:"image-area d-flex"},[i("VToolbar",{staticClass:"flex-grow-0",attrs:{dense:""}},[i("VTabs",{attrs:{color:"white"},model:{value:t.imageTab,callback:function(e){t.imageTab=e},expression:"imageTab"}},[i("VTab",[t._v("\n                Original\n            ")]),t._v(" "),i("VTab",{attrs:{disabled:t.isTabDistortedDisabled}},[t._v("\n                Distorted\n            ")])],1),t._v(" "),i("VSpacer"),t._v(" "),i("VMenu",{attrs:{"close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("VBtn",t._g({attrs:{icon:""}},n),[i("VIcon",[t._v("mdi-tune")])],1)]}}]),model:{value:t.tuneMenu,callback:function(e){t.tuneMenu=e},expression:"tuneMenu"}},[t._v(" "),i("VCard",[i("VCardText",[i("VSwitch",{attrs:{label:"Apply Viewport Offset",dense:""},model:{value:t.applyViewportOffset,callback:function(e){t.applyViewportOffset=e},expression:"applyViewportOffset"}}),t._v(" "),i("VSwitch",{attrs:{label:"Show Axes",dense:""},model:{value:t.showAxes,callback:function(e){t.showAxes=e},expression:"showAxes"}})],1),t._v(" "),i("VCardActions",[i("VBtn",{on:{click:function(e){t.tuneMenu=!1}}},[t._v("Close")])],1)],1)],1)],1),t._v(" "),i("VSheet",{staticClass:"overflow-hidden flex-grow-1 flex-shrink-1 image-area__viewport",attrs:{tile:""}},[t.showAxes?[i("div",{staticClass:"image-area__axis x-axis",style:t.xAxisPosition}),t._v(" "),i("div",{staticClass:"image-area__axis y-axis",style:t.yAxisPosition})]:t._e(),t._v(" "),i("ImageViewer",{ref:"imageViewer",staticClass:"image-area__image-plane fill-height",class:t.imageViewerClass,attrs:{src:t.src,scale:t.scale,position:t.position,"min-scale":t.minScale,"max-scale":t.maxScale,offset:t.imageOffset},on:{"update:scale":function(e){t.scale=e},"update:position":function(e){t.position=e},click:function(e){return t.$emit("plane-click",e)}},nativeOn:{mousemove:function(e){return t.onViewportMouseMove(e)},mouseleave:function(e){return t.onViewportMouseLeave(e)}}})],2),t._v(" "),i("VCardActions",[i("VToolbar",{attrs:{dense:"",flat:""}},[i("VBtn",{attrs:{icon:"",small:"",disabled:t.isMinScale},on:{click:function(e){return t.zoom(!1)}}},[i("VIcon",[t._v("mdi-magnify-minus-outline")])],1),t._v(" "),i("VMenu",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("VBtn",t._g({staticClass:"ml-2",attrs:{small:"",width:"30"}},n),[t._v("\n                        "+t._s(t.scalePercentage)+"%\n                    ")])]}}])},[t._v(" "),i("VList",[i("VListItem",{on:{click:function(e){t.scale=1}}},[i("VListItemTitle",[t._v("\n                            100%\n                        ")])],1),t._v(" "),i("VListItem",{on:{click:t.fit}},[i("VListItemTitle",[t._v("\n                            Fit\n                        ")])],1)],1)],1),t._v(" "),i("VBtn",{staticClass:"ml-2",attrs:{icon:"",small:"",disabled:t.isMaxScale},on:{click:function(e){return t.zoom(!0)}}},[i("VIcon",[t._v("mdi-magnify-plus-outline")])],1),t._v(" "),i("VSpacer"),t._v(" "),t.crosshair?[i("VSheet",{staticClass:"hidden-sm-and-down pa-1 text-center",attrs:{width:"100"}},[t._v("\n                    x: "+t._s(t.cursorAtX)+"\n                ")]),t._v(" "),i("VSheet",{staticClass:"hidden-sm-and-down pa-1 text-center ml-2",attrs:{width:"100"}},[t._v("\n                    y: "+t._s(t.cursorAtY)+"\n                ")])]:t._e()],2)],1)],1)};C._withStripped=!0;i(24);var I=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._g({staticClass:"image-viewer",class:t.containerClass},t.mouseTouchHandlers),[i("VPanzoom",{staticClass:"image-viewer__image",attrs:{tag:"div",bounds:t.lockBounds,"smooth-scroll":!1,scale:t.localScale,position:t.localPosition,"min-zoom":t.minScale,"max-zoom":t.maxScale},on:{"update:scale":function(e){t.localScale=e},"update:position":function(e){t.localPosition=e},panstart:t.onPanStart,panend:t.onPanEnd}},[i("img",{style:t.imageStyle,attrs:{src:t.src,alt:""}})])],1)};I._withStripped=!0;i(16);var P=i(417),S=i.n(P);function A(t){if(t.changedTouches){if(1===t.changedTouches.length){var e=t.changedTouches[0];return{pageX:e.pageX,pageY:e.pageY}}return null}return{pageX:t.pageX,pageY:t.pageY}}var k={name:"ImageViewer",components:{VPanzoom:{name:"VPanzoom",props:{tag:{type:String,default:"div"},beforeWheel:Function,filterKey:Function,zoomSpeed:Number,pinchSpeed:Number,maxZoom:Number,minZoom:Number,smoothScroll:Boolean,bounds:[Boolean,Object],autocenter:Boolean,disabled:Boolean,position:{type:Object,default:function(){return{x:0,y:0}}},scale:{type:Number,default:1}},data:function(){return{localPosition:{x:0,y:0},localScale:1}},watch:{disabled:function(t){this.$_panzoom&&(this.$_panzoom.isPaused()&&!t?this.$_panzoom.resume():!this.$_panzoom.isPaused()&&t&&this.$_panzoom.pause())},position:function(t){var e=t.x,i=t.y;e===this.localPosition.x&&i===this.localPosition.y||this.$_panzoom.moveTo(e,i)},scale:function(t){if(t!==this.localScale){var e=t/this.localScale,i=this.$el.getBoundingClientRect(),n=i.x,o=i.y,r=i.width,a=i.height,s=this.$el.parentNode.getBoundingClientRect(),l=n-s.x+r/2,u=o-s.y+a/2;this.$_panzoom.zoomTo(l,u,e)}}},mounted:function(){this.buildPanzoom()},beforeDestroy:function(){this.$_panzoom.dispose()},render:function(t){return t(this.tag,this.$slots.default)},methods:{buildPanzoom:function(){var t=this;this.$_panzoom=S()(this.$el,this.makeOptions()),this.$_panzoom.on("transform",(function(e){var i=e.getTransform(),n=i.x,o=i.y,r=i.scale;t.localPosition={x:n,y:o},t.localScale=r,t.$emit("update:position",{x:n,y:o}),t.$emit("update:scale",r),t.$emit("transform",e)})),this.$_panzoom.on("panstart",(function(e){return t.$emit("panstart",e)})),this.$_panzoom.on("panend",(function(e){return t.$emit("panend",e)})),this.$_panzoom.on("pan",(function(e){return t.$emit("pan",e)})),this.$_panzoom.on("zoom",(function(e){return t.$emit("zoom",e)})),this.$_panzoom.on("zoomend",(function(e){return t.$emit("zoomend",e)})),this.disabled&&this.$_panzoom.pause()},makeOptions:function(){return{beforeWheel:this.beforeWheel,filterKey:this.filterKey,zoomSpeed:this.zoomSpeed,pinchSpeed:this.pinchSpeed,maxZoom:this.maxZoom,minZoom:this.minZoom,smoothScroll:this.smoothScroll,bounds:this.bounds,autocenter:this.autocenter}}}}},props:{src:String,position:{type:Object,default:function(){return{x:0,y:0}}},scale:{type:Number,default:1},minScale:{type:Number,default:.1},maxScale:{type:Number,default:4},lockBounds:Boolean,offset:{type:Object,default:function(){return{x:0,y:0}}}},data:function(){var t,e,i,n,o;return t=e=i=n=o=this.mouseTouchHandler,{isPanning:!1,localScale:this.scale,localPosition:this.position,cursorStart:null,mouseTouchHandlers:{mousedown:t,mouseup:e,touchstart:i,touchend:n,touchcancel:o}}},computed:{imageStyle:function(){var t=0,e=0;return this.offset&&(t=this.offset.x,e=this.offset.y),{left:t+="px",top:e+="px",position:"relative"}},containerClass:function(){return{panning:this.isPanning}}},watch:{position:function(t){var e=t.x,i=t.y;e===this.localPosition.x&&i===this.localPosition.y||(this.localPosition={x:e,y:i})},scale:function(t){t!==this.localScale&&(this.localScale=t)},localPosition:function(t){var e=t.x,i=t.y;e===this.position.x&&i===this.position.y||this.$emit("update:position",{x:e,y:i})},localScale:function(t){t!==this.scale&&this.$emit("update:scale",t)}},methods:{onPanStart:function(){this.isPanning=!0},onPanEnd:function(){this.isPanning=!1},mouseTouchHandler:function(t){switch(t.type){case"mousedown":case"touchstart":this.cursorStart=A(t);break;case"mouseup":case"touchend":this.mouseTouchEnd(t);break;case"touchcancel":default:this.cursorStart=null}},mouseTouchEnd:function(t){if(this.cursorStart){var e=A(t);e&&e.pageX===this.cursorStart.pageX&&e.pageY===this.cursorStart.pageY&&this.emitClick(e),this.cursorStart=null}},emitClick:function(t){var e=t.pageX,i=t.pageY,n=this.$el.getBoundingClientRect(),o=n.top,r=e-n.left,a=i-o,s=1/this.localScale,l=(r-this.localPosition.x)*s,u=(a-this.localPosition.y)*s;this.$emit("click",{x:l,y:u})}}},F=(i(464),Object(a.a)(k,I,[],!1,null,"617039a8",null));F.options.__file="src/js/components/pages/lens-playground/image-area/image-viewer.vue";var M={name:"ImageArea",components:{ImageViewer:F.exports},props:{sourceImage:Image,distortedImage:Object,initialViewportOffset:Object,crosshair:Boolean},data:function(){return{imageTab:0,tuneMenu:!1,applyViewportOffset:!1,showAxes:!0,scale:1,position:{x:0,y:0},minScale:.1,maxScale:4,cursorAt:{x:null,y:null}}},computed:{image:function(){return 1===this.imageTab&&this.distortedImage&&this.distortedImage.image||this.sourceImage},src:function(){return this.image.src},isTabDistortedDisabled:function(){return!this.distortedImage},scalePercentage:function(){return Math.round(100*this.scale)},isMinScale:function(){return this.scale===this.minScale},isMaxScale:function(){return this.scale===this.maxScale},imageOffset:function(){if(this.applyViewportOffset){if(1===this.imageTab&&this.distortedImage){var t=this.distortedImage.viewport;return{x:t.x1,y:t.y1}}if(this.initialViewportOffset){var e=this.initialViewportOffset;return{x:e.x,y:e.y}}}return null},imageViewerClass:function(){return{crosshair:!!this.crosshair}},xAxisPosition:function(){return{left:this.position.x+"px"}},yAxisPosition:function(){return{top:this.position.y+"px"}},cursorAtX:function(){var t=this.cursorAt.x;return null!==t?Math.round(t):"-"},cursorAtY:function(){var t=this.cursorAt.y;return null!==t?Math.round(t):"-"},cursorAtText:function(){var t=this.cursorAt,e=t.x,i=t.y;return null===e&&(e="-"),null===i&&(i="-"),"x: ".concat(e,"; y: ").concat(i)}},watch:{distortedImage:function(t){this.imageTab=t?1:0}},mounted:function(){this.fit()},methods:{zoom:function(t){var e=this.scale*(t?1.25:.75);e<this.minScale&&(e=this.minScale),e>this.maxScale&&(e=this.maxScale),this.scale=e},fit:function(){var t,e,i=this,n=this.$refs.imageViewer.$el.getBoundingClientRect(),o=n.width,r=n.height,a=this.image,s=a.width,l=a.height,u=s/l;s>o&&(l=(s=o)/u),l>r&&(s=(l=r)*u),t=o/2-s/2,e=r/2-l/2;var c=this.imageOffset;c&&(t-=c.x,e-=c.y),this.scale=s/this.image.width,this.$nextTick((function(){i.position={x:t,y:e}}))},onViewportMouseMove:function(t){var e=this.$refs.imageViewer.$el.getBoundingClientRect(),i=e.top,n=e.left,o=t.pageX-n,r=t.pageY-i,a=1/this.scale,s=(o-this.position.x)*a,l=(r-this.position.y)*a;this.cursorAt.x=s,this.cursorAt.y=l},onViewportMouseLeave:function(t){this.cursorAt={x:null,y:null}}}},T=(i(466),i(130)),j=i.n(T),E=i(123),D=i(188),B=i(80),R=i(125),L=i(185),N=i(126),$=i(61),z=i(191),G=i(41),Z=i(433),U=i(436),W=i(437),Y=i(447),J=i(49),H=Object(a.a)(M,C,[],!1,null,"42808a23",null);j()(H,{VBtn:E.a,VCard:D.a,VCardActions:B.a,VCardText:B.b,VIcon:R.a,VList:L.a,VListItem:N.a,VListItemTitle:$.b,VMenu:z.a,VSheet:G.a,VSpacer:Z.a,VSwitch:U.a,VTab:W.a,VTabs:Y.a,VToolbar:J.a}),H.options.__file="src/js/components/pages/lens-playground/image-area/image-area.vue";var X=H.exports,q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h3",{staticClass:"mb-3"},[t._v("Image Settings")]),t._v(" "),i("ImageSettings",{attrs:{"interpolation-method":t.localImageOptions.interpolationMethod,"virtual-pixel-method":t.localImageOptions.virtualPixelMethod,"background-color":t.localImageOptions.backgroundColor,"viewport-offset":t.localImageOptions.initialViewportOffset,disabled:t.disabled},on:{"update:interpolationMethod":function(e){return t.$set(t.localImageOptions,"interpolationMethod",e)},"update:interpolation-method":function(e){return t.$set(t.localImageOptions,"interpolationMethod",e)},"update:virtualPixelMethod":function(e){return t.$set(t.localImageOptions,"virtualPixelMethod",e)},"update:virtual-pixel-method":function(e){return t.$set(t.localImageOptions,"virtualPixelMethod",e)},"update:backgroundColor":function(e){return t.$set(t.localImageOptions,"backgroundColor",e)},"update:background-color":function(e){return t.$set(t.localImageOptions,"backgroundColor",e)},"update:viewportOffset":function(e){return t.$set(t.localImageOptions,"initialViewportOffset",e)},"update:viewport-offset":function(e){return t.$set(t.localImageOptions,"initialViewportOffset",e)},"change-image":function(e){return t.$emit("change-image",e)}}}),t._v(" "),i("VDivider"),t._v(" "),i("h3",{staticClass:"mt-4 mb-3"},[t._v("Distortion Settings")]),t._v(" "),i("DistortionSettings",{staticClass:"mb-3",attrs:{distortion:t.localDistortion.name,args:t.localDistortion.args,disabled:t.disabled,"source-image":t.sourceImage,"viewport-offset":t.imageOptions.initialViewportOffset,"active-offset":t.argsActiveOffset},on:{"update:distortion":function(e){return t.$set(t.localDistortion,"name",e)},"update:args":function(e){return t.$set(t.localDistortion,"args",e)},"pick-point":function(e){return t.$emit("pick-point",e)},"pick-point-cancel":function(e){return t.$emit("pick-point-cancel",e)}}}),t._v(" "),i("VDivider"),t._v(" "),i("h3",{staticClass:"mt-4 mb-3"},[t._v("Options")]),t._v(" "),i("DistortionOptions",{attrs:{resample:t.localDistortionOptions.resample,"filter-preset":t.localDistortionOptions.filterPreset,"custom-filter-options":t.localDistortionOptions.customFilterOptions,"matte-color":t.localDistortionOptions.matteColor,supersample:t.localDistortionOptions.supersample,"best-fit":t.localDistortionOptions.bestFit,"use-custom-viewport":t.localDistortionOptions.useCustomViewport,"custom-viewport":t.localDistortionOptions.customViewport,"disable-best-fit":t.bestFitViewportDisabled,"disable-source-viewport":t.sourceViewportDisabled,disabled:t.disabled},on:{"update:resample":function(e){return t.$set(t.localDistortionOptions,"resample",e)},"update:filterPreset":function(e){return t.$set(t.localDistortionOptions,"filterPreset",e)},"update:filter-preset":function(e){return t.$set(t.localDistortionOptions,"filterPreset",e)},"update:customFilterOptions":function(e){return t.$set(t.localDistortionOptions,"customFilterOptions",e)},"update:custom-filter-options":function(e){return t.$set(t.localDistortionOptions,"customFilterOptions",e)},"update:matteColor":function(e){return t.$set(t.localDistortionOptions,"matteColor",e)},"update:matte-color":function(e){return t.$set(t.localDistortionOptions,"matteColor",e)},"update:supersample":function(e){return t.$set(t.localDistortionOptions,"supersample",e)},"update:bestFit":function(e){return t.$set(t.localDistortionOptions,"bestFit",e)},"update:best-fit":function(e){return t.$set(t.localDistortionOptions,"bestFit",e)},"update:useCustomViewport":function(e){return t.$set(t.localDistortionOptions,"useCustomViewport",e)},"update:use-custom-viewport":function(e){return t.$set(t.localDistortionOptions,"useCustomViewport",e)},"update:customViewport":function(e){return t.$set(t.localDistortionOptions,"customViewport",e)},"update:custom-viewport":function(e){return t.$set(t.localDistortionOptions,"customViewport",e)}}})],1)};q._withStripped=!0;i(3),i(10),i(11);var Q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("FileSelectionArea",{staticClass:"mb-3",attrs:{disabled:t.disabled},on:{input:function(e){return t.$emit("change-image",e)}},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.click;return[i("VBtn",{attrs:{disabled:t.disabled},on:{click:n}},[t._v("Change Image")])]}}])}),t._v(" "),i("VSelect",{attrs:{items:t.interpolationMethods,label:"Interpolation Method",dense:"",filled:"",disabled:t.disabled},model:{value:t.selectedInterpolationMethod,callback:function(e){t.selectedInterpolationMethod=e},expression:"selectedInterpolationMethod"}}),t._v(" "),i("VSelect",{attrs:{items:t.virtualPixelMethods,label:"Virtual Pixel Method",dense:"",filled:"",disabled:t.disabled},model:{value:t.selectedVirtualPixelMethod,callback:function(e){t.selectedVirtualPixelMethod=e},expression:"selectedVirtualPixelMethod"}}),t._v(" "),i("ColorInput",{attrs:{label:"Background Color",disabled:t.disabled},model:{value:t.selectedBackgroundColor,callback:function(e){t.selectedBackgroundColor=e},expression:"selectedBackgroundColor"}}),t._v(" "),i("h5",[t._v("Initial Viewport Offset")]),t._v(" "),i("VRow",{attrs:{dense:""}},[i("VCol",{attrs:{cols:"6"}},[i("VTextField",{attrs:{type:"number",label:"x",dense:"",outlined:"",disabled:t.disabled},model:{value:t.localViewportOffset.x,callback:function(e){t.$set(t.localViewportOffset,"x",t._n(e))},expression:"localViewportOffset.x"}})],1),t._v(" "),i("VCol",{attrs:{cols:"6"}},[i("VTextField",{attrs:{type:"number",label:"y",dense:"",outlined:"",disabled:t.disabled},model:{value:t.localViewportOffset.y,callback:function(e){t.$set(t.localViewportOffset,"y",t._n(e))},expression:"localViewportOffset.y"}})],1)],1)],1)};Q._withStripped=!0;i(57);var K=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("VMenu",{ref:"menu",attrs:{"close-on-content-click":!1,"close-on-click":!1,"return-value":t.color,transition:"scale-transition","offset-y":"","min-width":"290px",disabled:t.disabled},on:{"update:returnValue":function(e){t.color=e},"update:return-value":function(e){t.color=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("VInput",{attrs:{label:t.label}},[i("div",t._g({staticClass:"transparent-backdrop"},n),[i("div",{staticClass:"color-sample",class:{disabled:!!t.disabled},style:{backgroundColor:t.sheetColor}})])])]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[t._v(" "),i("VCard",[i("VColorPicker",{attrs:{"hide-mode-switch":!0,mode:"rgba"},model:{value:t.color,callback:function(e){t.color=e},expression:"color"}}),t._v(" "),i("VCardActions",[i("VBtn",{attrs:{small:"",color:"primary"},on:{click:function(e){return t.$refs.menu.save(t.color)}}},[t._v("\n                Ok\n            ")]),t._v(" "),i("VBtn",{attrs:{small:"",color:"secondary"},on:{click:function(e){return t.$refs.menu.save({r:0,g:0,b:0,a:0})}}},[t._v("\n                Transparent\n            ")]),t._v(" "),i("VBtn",{attrs:{small:""},on:{click:function(e){t.menu=!1}}},[t._v("\n                Cancel\n            ")])],1)],1)],1)};K._withStripped=!0;i(25),i(26),i(18),i(31),i(19),i(20);function tt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t))&&"[object Arguments]"!==Object.prototype.toString.call(t))return;var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw r}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var et={name:"ColorInput",props:{value:{type:Array,default:function(){return[255,255,255,255]}},label:String,disabled:Boolean},data:function(){return{menu:!1,color:(t=this.value,e=tt(t,4),i=e[0],n=e[1],o=e[2],r=e[3],{r:i,g:n,b:o,a:r/=255})};var t,e,i,n,o,r},computed:{sheetColor:function(){return"rgba(".concat(this.color.r,", ").concat(this.color.g,", ").concat(this.color.b,", ").concat(this.color.a,")")}},watch:{color:function(t,e){var i,n,o,r,a,s,l,u;u=e,((l=t).r!==u.r||l.g!==u.g||l.b!==u.b||l.a!==u.a)&&this.$emit("input",(o=(i=t).r,r=i.g,a=i.b,s=i.a,[o,r,a,(n=s,Math.round(255*n))]))}}},it=(i(468),i(446)),nt=i(190),ot=Object(a.a)(et,K,[],!1,null,"cb6e9518",null);j()(ot,{VBtn:E.a,VCard:D.a,VCardActions:B.a,VColorPicker:it.a,VInput:nt.a,VMenu:z.a}),ot.options.__file="src/js/components/pages/lens-playground/color-input.vue";var rt=ot.exports;function at(t){return Object.keys(t).map((function(e){return{text:e,value:t[e]}}))}var st={name:"ImageSettings",components:{ColorInput:rt,FileSelectionArea:l},props:{interpolationMethod:{type:Number,default:u.interpolation.AVERAGE},virtualPixelMethod:{type:Number,default:u.vpx.TRANSPARENT},backgroundColor:{type:Array,default:function(){return[0,0,0,0]}},viewportOffset:{type:Object,default:function(){return{x:0,y:0}}},disabled:Boolean},data:function(){return{localViewportOffset:{x:0,y:0}}},computed:{selectedInterpolationMethod:{get:function(){return this.interpolationMethod},set:function(t){this.$emit("update:interpolation-method",t)}},selectedVirtualPixelMethod:{get:function(){return this.virtualPixelMethod},set:function(t){this.$emit("update:virtual-pixel-method",t)}},selectedBackgroundColor:{get:function(){return this.backgroundColor},set:function(t){return this.$emit("update:background-color",t)}},interpolationMethods:function(){return at(u.interpolation)},virtualPixelMethods:function(){return at(u.vpx)}},watch:{viewportOffset:{handler:function(t){var e=t.x,i=t.y;e===this.localViewportOffset.x&&i===this.localViewportOffset.y||(this.localViewportOffset={x:e,y:i})},immediate:!0},localViewportOffset:{handler:function(t){var e=t.x,i=t.y;e===this.viewportOffset.x&&i===this.viewportOffset.y||this.$emit("update:viewport-offset",{x:e,y:i})},deep:!0}}},lt=i(434),ut=i(435),ct=i(445),pt=i(88),ft=Object(a.a)(st,Q,[],!1,null,null,null);j()(ft,{VBtn:E.a,VCol:lt.a,VRow:ut.a,VSelect:ct.a,VTextField:pt.a}),ft.options.__file="src/js/components/pages/lens-playground/image-settings.vue";var dt=ft.exports,ht=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("VSelect",{attrs:{items:t.distortionNames,label:"Distortion",dense:"",filled:"",disabled:t.disabled},model:{value:t.proxyDistortion,callback:function(e){t.proxyDistortion=e},expression:"proxyDistortion"}}),t._v(" "),i("h4",[t._v("Distortion Arguments")]),t._v(" "),i("h5",{staticClass:"mt2"},[t._v(t._s(t.distortionArgumentsName))]),t._v(" "),t.isUsingContolPoints?i("ControlPoints",{attrs:{"min-control-points":t.minControlPoints,"active-offset":t.activeOffset,disabled:t.disabled},on:{"pick-point":function(e){return t.$emit("pick-point",e)},"pick-point-cancel":function(e){return t.$emit("pick-point-cancel")},"pick-source-apex":t.onPickSourceApex},model:{value:t.localArgs,callback:function(e){t.localArgs=e},expression:"localArgs"}}):"AFFINE_PROJECTION"===t.distortion?i("AffineProjectionArgs",{attrs:{disabled:t.disabled},model:{value:t.localArgs,callback:function(e){t.localArgs=e},expression:"localArgs"}}):"PERSPECTIVE_PROJECTION"===t.distortion?i("PerspectiveProjectionArgs",{attrs:{disabled:t.disabled},model:{value:t.localArgs,callback:function(e){t.localArgs=e},expression:"localArgs"}}):"ARC"===t.distortion?i("ArcArgs",{attrs:{disabled:t.disabled},model:{value:t.localArgs,callback:function(e){t.localArgs=e},expression:"localArgs"}}):t._e()],1)};ht._withStripped=!0;i(66);var mt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"control-points"},[t._l(this.controlPointsGroups,(function(e,n){var o=e[0],r=e[1],a=e[2],s=e[3];return i("div",{key:n,staticClass:"d-flex"},[i("PointsMapping",{attrs:{index:n,u:o,v:r,x:a,y:s,disabled:t.disabled,"active-offset":t.getActiveOffset(n),"enable-deletion":t.enableDeletion},on:{"update:u":function(e){return t.setValue(4*n,e)},"update:v":function(e){return t.setValue(4*n+1,e)},"update:x":function(e){return t.setValue(4*n+2,e)},"update:y":function(e){return t.setValue(4*n+3,e)},"pick-point":function(e){return t.pickPoint(e,n)},"pick-point-cancel":function(e){return t.$emit("pick-point-cancel")},"pick-source-apex":function(e){return t.pickApex(e,n)},"remove-control-point":function(e){return t.removeControlPoint(n)}}})],1)})),t._v(" "),i("VBtn",{attrs:{disabled:t.disabled},on:{click:function(e){return t.addControlPoint()}}},[t._v("\n        Add\n    ")])],2)};mt._withStripped=!0;var bt={props:{value:Array,disabled:Boolean},data:function(){return{localValue:[]}},methods:{setValue:function(t,e){"string"==typeof e&&(e=parseFloat(e.replace(",","."))),this.$set(this.localValue,t,e)},getFilteredArray:function(){return this.localValue.map((function(t){return isNaN(t)||void 0===t?null:t}))},emitInput:function(){this.$emit("input",this.getFilteredArray())}},watch:{value:{handler:function(t){w(t,this.localValue)||(this.localValue=t.slice())},immediate:!0},localValue:function(t){w(t,this.value)||this.emitInput()}}},gt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"points-mapping d-flex"},[i("VRow",{staticClass:"flex-grow-1",attrs:{dense:""}},[i("VCol",{attrs:{cols:"6"}},[i("CoordsPair",{attrs:{"x-label":t.ulabel,"y-label":t.vlabel,x:t.uval,y:t.vval,disabled:t.disabled},on:{"update:x":function(e){t.uval=e},"update:y":function(e){t.vval=e}}})],1),t._v(" "),i("VCol",{attrs:{cols:"6"}},[i("CoordsPair",{attrs:{"x-label":t.xlabel,"y-label":t.ylabel,x:t.xval,y:t.yval,disabled:t.disabled},on:{"update:x":function(e){t.xval=e},"update:y":function(e){t.yval=e}}})],1)],1),t._v(" "),null===t.activeOffset?i("VMenu",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("VBtn",t._g({staticClass:"mt-2 ml-2",attrs:{icon:"",disabled:t.disabled}},n),[i("VIcon",[t._v("mdi-dots-vertical")])],1)]}}],null,!1,671488762),model:{value:t.showMenu,callback:function(e){t.showMenu=e},expression:"showMenu"}},[t._v(" "),i("VList",[i("VMenu",{attrs:{"offset-x":!0,left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("VListItem",t._g({},n),[i("VListItemTitle",[i("VIcon",[t._v("mdi-menu-left")]),t._v("\n                            Pick Source Point\n                        ")],1)],1)]}}],null,!1,3526471503)},[t._v(" "),i("VList",[i("VListItem",{on:{click:function(e){return t.pickPoint(0)}}},[i("VListItemIcon",[i("VIcon",[t._v("mdi-target")])],1),t._v(" "),i("VListItemTitle",[t._v("\n                            From Image\n                        ")])],1),t._v(" "),i("VListItem",{on:{click:function(e){return t.pickApex("tl",0)}}},[i("VListItemIcon",[i("VIcon",[t._v("mdi-arrow-top-left")])],1),t._v(" "),i("VListItemTitle",[t._v("\n                            Image Top Left\n                        ")])],1),t._v(" "),i("VListItem",{on:{click:function(e){return t.pickApex("tr",0)}}},[i("VListItemIcon",[i("VIcon",[t._v("mdi-arrow-top-right")])],1),t._v(" "),i("VListItemTitle",[t._v("\n                            Image Top Right\n                        ")])],1),t._v(" "),i("VListItem",{on:{click:function(e){return t.pickApex("bl",0)}}},[i("VListItemIcon",[i("VIcon",[t._v("mdi-arrow-bottom-left")])],1),t._v(" "),i("VListItemTitle",[t._v("\n                            Image Bottom Left\n                        ")])],1),t._v(" "),i("VListItem",{on:{click:function(e){return t.pickApex("br",0)}}},[i("VListItemIcon",[i("VIcon",[t._v("mdi-arrow-bottom-right")])],1),t._v(" "),i("VListItemTitle",[t._v("\n                            Image Bottom Right\n                        ")])],1)],1)],1),t._v(" "),i("VListItem",{on:{click:function(e){return t.pickPoint(2)}}},[i("VListItemIcon",[i("VIcon",[t._v("mdi-target-variant")])],1),t._v(" "),i("VListItemTitle",[t._v("\n                    Pick Destination Point\n                ")])],1),t._v(" "),i("VListItem",{attrs:{disabled:!t.enableDeletion},on:{click:function(e){return t.$emit("remove-control-point")}}},[i("VListItemTitle",[t._v("\n                    Remove Mapping\n                ")])],1)],1)],1):i("VBtn",{staticClass:"mt-2 ml-2",attrs:{icon:""},on:{click:function(e){return t.$emit("pick-point-cancel")}}},[i("VIcon",[t._v("mdi-cancel")])],1)],1)};gt._withStripped=!0;var vt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"coords-pair"},[i("VRow",{attrs:{dense:""}},[i("VCol",{attrs:{cols:"6"}},[i("VTextField",{attrs:{label:t.xLabel,type:"number",dense:"",outlined:"",disabled:t.disabled},model:{value:t.xval,callback:function(e){t.xval=t._n(e)},expression:"xval"}})],1),t._v(" "),i("VCol",{attrs:{cols:"6"}},[i("VTextField",{attrs:{label:t.yLabel,type:"number",dense:"",outlined:"",disabled:t.disabled},model:{value:t.yval,callback:function(e){t.yval=t._n(e)},expression:"yval"}})],1)],1)],1)};vt._withStripped=!0;var yt={name:"CoordsPair",props:{x:{type:Number,default:0},y:{type:Number,default:0},xLabel:{type:String,default:"x"},yLabel:{type:String,default:"y"},disabled:Boolean},computed:{xval:{get:function(){return this.x},set:function(t){this.$emit("update:x",t)}},yval:{get:function(){return this.y},set:function(t){this.$emit("update:y",t)}}}},wt=Object(a.a)(yt,vt,[],!1,null,null,null);function xt(t){return{get:function(){return this[t]},set:function(e){this.$emit("update:".concat(t),e)}}}j()(wt,{VCol:lt.a,VRow:ut.a,VTextField:pt.a}),wt.options.__file="src/js/components/pages/lens-playground/distortion-arguments/coords-pair.vue";var _t={name:"PointsMapping",components:{CoordsPair:wt.exports},props:{u:{type:Number,default:0},v:{type:Number,default:0},x:{type:Number,default:0},y:{type:Number,default:0},index:Number,disabled:Boolean,enableDeletion:{type:Boolean,default:!0},activeOffset:{type:[Number,null],default:null}},data:function(){return{showMenu:!1}},computed:{uval:xt("u"),vval:xt("v"),xval:xt("x"),yval:xt("y"),labelIndex:function(){return void 0!==this.index?this.index:""},ulabel:function(){return"u".concat(this.labelIndex)},vlabel:function(){return"v".concat(this.labelIndex)},xlabel:function(){return"x".concat(this.labelIndex)},ylabel:function(){return"y".concat(this.labelIndex)}},methods:{pickApex:function(t,e){this.$emit("pick-source-apex",{location:t,offset:e}),this.showMenu=!1},pickPoint:function(t){this.$emit("pick-point",t),this.showMenu=!1}}},Ot=i(104),Vt=Object(a.a)(_t,gt,[],!1,null,null,null);j()(Vt,{VBtn:E.a,VCol:lt.a,VIcon:R.a,VList:L.a,VListItem:N.a,VListItemIcon:Ot.a,VListItemTitle:$.b,VMenu:z.a,VRow:ut.a}),Vt.options.__file="src/js/components/pages/lens-playground/distortion-arguments/points-mapping.vue";var Ct={name:"ControlPoints",mixins:[bt],components:{PointsMapping:Vt.exports},props:{minControlPoints:{type:Number,default:0},activeOffset:{type:[Number,null],default:null}},computed:{controlPointsGroups:function(){for(var t=[],e=0;e<this.localValue.length;e+=4)t.push(this.localValue.slice(e,e+4));return t},controlPointsNumber:function(){return this.localValue.length/4},enableDeletion:function(){return this.controlPointsNumber>this.minControlPoints}},methods:{addControlPoint:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.localValue.splice(this.localValue.length,0,t,e,i,n),this.emitInput()},removeControlPoint:function(t){this.localValue.splice(4*t,4),this.emitInput()},pickApex:function(t,e){var i=t.location,n=t.offset;n+=4*e,this.$emit("pick-source-apex",{location:i,offset:n})},pickPoint:function(t,e){t+=4*e,this.$emit("pick-point",t)},getActiveOffset:function(t){return null===this.activeOffset?null:Math.floor(this.activeOffset/4)===t?this.activeOffset%4:null}}},It=Object(a.a)(Ct,mt,[],!1,null,null,null);j()(It,{VBtn:E.a}),It.options.__file="src/js/components/pages/lens-playground/distortion-arguments/control-points.vue";var Pt=It.exports,St=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("VRow",{attrs:{dense:""}},t._l(t.argsMap,(function(e,n){var o=e.label,r=e.index;return i("VCol",{key:o,attrs:{cols:"4"}},[i("VTextField",{attrs:{type:"number",label:o,dense:"",outlined:"",value:t.localValue[r],disabled:t.disabled},on:{change:function(e){return t.setValue(r,e)}}})],1)})),1)],1)};St._withStripped=!0;var At=[{label:"sx",index:0},{label:"rx",index:2},{label:"tx",index:4},{label:"ry",index:1},{label:"sy",index:3},{label:"ty",index:5}],kt={name:"AffineProjectionArgs",mixins:[bt],data:function(){return{argsMap:At}}},Ft=Object(a.a)(kt,St,[],!1,null,null,null);j()(Ft,{VCol:lt.a,VRow:ut.a,VTextField:pt.a}),Ft.options.__file="src/js/components/pages/lens-playground/distortion-arguments/affine-projection-args.vue";var Mt=Ft.exports,Tt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("VRow",{attrs:{dense:""}},t._l(t.coeffNames,(function(e,n){return i("VCol",{key:e,attrs:{cols:"4"}},[i("VTextField",{attrs:{type:"number",label:e,dense:"",outlined:"",value:t.localValue[n],disabled:t.disabled},on:{change:function(e){return t.setValue(n,e)}}})],1)})),1)],1)};Tt._withStripped=!0;var jt={name:"PerspectiveProjectionArgs",mixins:[bt],data:function(){return{coeffNames:["sx","ry","tx","rx","sy","ty","px","py"]}}},Et=Object(a.a)(jt,Tt,[],!1,null,null,null);j()(Et,{VCol:lt.a,VRow:ut.a,VTextField:pt.a}),Et.options.__file="src/js/components/pages/lens-playground/distortion-arguments/perspective-projection-args.vue";var Dt=Et.exports,Bt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("VRow",{attrs:{dense:""}},t._l(t.fields,(function(e,n){var o=e.label,r=e.clearable,a=e.min,s=e.max;return i("VCol",{key:o,attrs:{cols:"6"}},[i("VTextField",{attrs:{type:"number",label:o,value:t.localValue[n],clearable:r,dense:"",outlined:"",min:a,max:s,disabled:t.disabled},on:{change:function(e){return t.setValue(n,e)}}})],1)})),1)],1)};Bt._withStripped=!0;var Rt={name:"ArcArgs",mixins:[bt],computed:{fields:function(){return[{label:"Arc Angle",clearable:!1,min:.1,max:360},{label:"Rotation Angle",clearable:!0},{label:"Outer Radius",clearable:!0},{label:"Inner Radius",clearable:!0,min:0}]}},methods:{emitInput:function(){for(var t,e=this.getFilteredArray(),i=e.length-1;i>0&&null===e[i];i--)t=i;t&&e.splice(t),this.$emit("input",e)}}},Lt=Object(a.a)(Rt,Bt,[],!1,null,null,null);j()(Lt,{VCol:lt.a,VRow:ut.a,VTextField:pt.a}),Lt.options.__file="src/js/components/pages/lens-playground/distortion-arguments/arc-args.vue";var Nt=Lt.exports,$t=c.a.distorts,zt={name:"DistortionSettings",components:{ControlPoints:Pt,AffineProjectionArgs:Mt,PerspectiveProjectionArgs:Dt,ArcArgs:Nt},props:{distortion:String,args:Array,disabled:Boolean,sourceImage:{type:Image,default:function(){return null}},activeOffset:{type:[Number,null],default:null},viewportOffset:{type:Object,default:function(){return{x:0,y:0}}}},data:function(){return{localArgs:[]}},computed:{proxyDistortion:x("distortion"),distortionNames:function(){return Object.keys($t)},isUsingContolPoints:function(){return"AFFINE"===this.distortion||"PERSPECTIVE"===this.distortion},minControlPoints:function(){switch(this.distortion){case"AFFINE":return 1;case"PERSPECTIVE":return 4;default:return 0}},distortionArgumentsName:function(){switch(this.distortion){case"AFFINE":case"PERSPECTIVE":return"Control Points";case"AFFINE_PROJECTION":return"Affine Matrix";case"PERSPECTIVE_PROJECTION":return"Perspective Matrix";case"ARC":return"Arc Parameters"}}},watch:{args:{handler:function(t){w(t,this.localArgs)||(this.localArgs=t.slice())},immediate:!0},localArgs:function(t){w(t,this.args)||this.$emit("update:args",t)}},methods:{onPickSourceApex:function(t){var e=t.location,i=t.offset;if(this.sourceImage){var n,o;switch(e){case"tl":n=0,o=0;break;case"tr":n=this.sourceImage.width-1,o=0;break;case"br":n=this.sourceImage.width-1,o=this.sourceImage.height-1;break;case"bl":n=0,o=this.sourceImage.height-1}n+=this.viewportOffset.x,o+=this.viewportOffset.y,this.localArgs.splice(i,2,n,o)}}}},Gt=Object(a.a)(zt,ht,[],!1,null,null,null);j()(Gt,{VSelect:ct.a}),Gt.options.__file="src/js/components/pages/lens-playground/distortion-settings/distortion-settings.vue";var Zt=Gt.exports,Ut=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h4",[t._v("Resampling Options")]),t._v(" "),i("VCheckbox",{attrs:{label:"EWA Resampling",dense:"",disabled:t.disabled||t.disableResampling},model:{value:t.proxyResample,callback:function(e){t.proxyResample=e},expression:"proxyResample"}}),t._v(" "),i("VExpandTransition",[t.resample?i("FilterSettings",{attrs:{"filter-preset":t.proxyFilterPreset,"custom-filter-options":t.proxyCustomFilterOptions,disabled:t.disabled},on:{"update:filterPreset":function(e){t.proxyFilterPreset=e},"update:filter-preset":function(e){t.proxyFilterPreset=e},"update:customFilterOptions":function(e){t.proxyCustomFilterOptions=e},"update:custom-filter-options":function(e){t.proxyCustomFilterOptions=e}}}):t._e()],1),t._v(" "),i("SupersamplingSettings",{attrs:{supersample:t.proxySupersample,disabled:t.disabled},on:{"update:supersample":function(e){t.proxySupersample=e}}}),t._v(" "),i("ViewportSettings",{attrs:{"best-fit":t.proxyBestFit,"use-custom-viewport":t.proxyUseCustomViewport,"custom-viewport":t.proxyCustomViewport,"best-fit-disabled":t.disableBestFit,"source-disabled":t.disableSourceViewport,disabled:t.disabled},on:{"update:bestFit":function(e){t.proxyBestFit=e},"update:best-fit":function(e){t.proxyBestFit=e},"update:useCustomViewport":function(e){t.proxyUseCustomViewport=e},"update:use-custom-viewport":function(e){t.proxyUseCustomViewport=e},"update:customViewport":function(e){t.proxyCustomViewport=e},"update:custom-viewport":function(e){t.proxyCustomViewport=e}}}),t._v(" "),i("h4",{staticClass:"mb-2"},[t._v("Other Settings")]),t._v(" "),i("ColorInput",{attrs:{label:"Matte Color",disabled:t.disabled},model:{value:t.proxyMatteColor,callback:function(e){t.proxyMatteColor=e},expression:"proxyMatteColor"}})],1)};Ut._withStripped=!0;var Wt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("VSelect",{attrs:{items:t.presetNames,label:"Filter Preset",dense:"",filled:"",disabled:t.disabled},model:{value:t.proxyFilterPreset,callback:function(e){t.proxyFilterPreset=e},expression:"proxyFilterPreset"}}),t._v(" "),i("VExpandTransition",["CUSTOM"===t.filterPreset?i("FilterConfigurator",{attrs:{"filter-func":t.filterFunc,"filter-func-cubic-b-c_b":t.filterFuncCubicBC_b,"filter-func-cubic-b-c_c":t.filterFuncCubicBC_c,"window-func":t.windowFunc,"window-func-cubic-b-c_b":t.windowFuncCubicBC_b,"window-func-cubic-b-c_c":t.windowFuncCubicBC_c,support:t.support,scale:t.scale,blur:t.blur,"window-support":t.windowSupport,disabled:t.disabled},on:{"update:filterFunc":function(e){t.filterFunc=e},"update:filter-func":function(e){t.filterFunc=e},"update:filterFuncCubicBC_b":function(e){t.filterFuncCubicBC_b=e},"update:filter-func-cubic-b-c_b":function(e){t.filterFuncCubicBC_b=e},"update:filterFuncCubicBC_c":function(e){t.filterFuncCubicBC_c=e},"update:filter-func-cubic-b-c_c":function(e){t.filterFuncCubicBC_c=e},"update:windowFunc":function(e){t.windowFunc=e},"update:window-func":function(e){t.windowFunc=e},"update:windowFuncCubicBC_b":function(e){t.windowFuncCubicBC_b=e},"update:window-func-cubic-b-c_b":function(e){t.windowFuncCubicBC_b=e},"update:windowFuncCubicBC_c":function(e){t.windowFuncCubicBC_c=e},"update:window-func-cubic-b-c_c":function(e){t.windowFuncCubicBC_c=e},"update:support":function(e){t.support=e},"update:scale":function(e){t.scale=e},"update:blur":function(e){t.blur=e},"update:windowSupport":function(e){t.windowSupport=e},"update:window-support":function(e){t.windowSupport=e}}}):t._e()],1)],1)};Wt._withStripped=!0;var Yt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h5",{staticClass:"mb-2"},[t._v("Custom Filter Settings")]),t._v(" "),i("FilterFunctionConfigurator",{attrs:{name:t.proxyFilterFunc,"cubic-b-c_b":t.proxyFilterFuncCubicBC_b,"cubic-b-c_c":t.proxyFilterFuncCubicBC_c,label:"Filter Function",disabled:t.disabled},on:{"update:name":function(e){t.proxyFilterFunc=e},"update:cubicBC_b":function(e){t.proxyFilterFuncCubicBC_b=e},"update:cubic-b-c_b":function(e){t.proxyFilterFuncCubicBC_b=e},"update:cubicBC_c":function(e){t.proxyFilterFuncCubicBC_c=e},"update:cubic-b-c_c":function(e){t.proxyFilterFuncCubicBC_c=e}}}),t._v(" "),i("FilterFunctionConfigurator",{attrs:{name:t.proxyWindowFunc,"cubic-b-c_b":t.proxyWindowFuncCubicBC_b,"cubic-b-c_c":t.proxyWindowFuncCubicBC_c,label:"Windowing Function",disabled:t.disabled},on:{"update:name":function(e){t.proxyWindowFunc=e},"update:cubicBC_b":function(e){t.proxyWindowFuncCubicBC_b=e},"update:cubic-b-c_b":function(e){t.proxyWindowFuncCubicBC_b=e},"update:cubicBC_c":function(e){t.proxyWindowFuncCubicBC_c=e},"update:cubic-b-c_c":function(e){t.proxyWindowFuncCubicBC_c=e}}}),t._v(" "),i("VRow",{attrs:{dense:""}},[i("VCol",{attrs:{cols:"6"}},[i("VTextField",{attrs:{type:"number",label:"Support",dense:"",outlined:"",disabled:t.disabled},model:{value:t.proxySupport,callback:function(e){t.proxySupport=t._n(e)},expression:"proxySupport"}})],1),t._v(" "),i("VCol",{attrs:{cols:"6"}},[i("VTextField",{attrs:{type:"number",label:"Scale",dense:"",outlined:"",disabled:t.disabled},model:{value:t.proxyScale,callback:function(e){t.proxyScale=t._n(e)},expression:"proxyScale"}})],1),t._v(" "),i("VCol",{attrs:{cols:"6"}},[i("VTextField",{attrs:{type:"number",label:"Blur",dense:"",outlined:"",disabled:t.disabled},model:{value:t.proxyBlur,callback:function(e){t.proxyBlur=t._n(e)},expression:"proxyBlur"}})],1),t._v(" "),i("VCol",{attrs:{cols:"6"}},[i("VTextField",{attrs:{type:"number",label:"Window Support",dense:"",outlined:"",disabled:t.disabled},model:{value:t.proxyWindowSupport,callback:function(e){t.proxyWindowSupport=t._n(e)},expression:"proxyWindowSupport"}})],1)],1)],1)};Yt._withStripped=!0;var Jt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("VSelect",{attrs:{label:t.label,items:t.filterFunctionNames,filled:"",dense:"",disabled:t.disabled},model:{value:t.proxyName,callback:function(e){t.proxyName=e},expression:"proxyName"}}),t._v(" "),i("VExpandTransition",["cubicBC"===t.name?i("div",[i("VTextField",{attrs:{label:"b",type:"number",dense:"",outlined:"",disabled:t.disabled},model:{value:t.proxyCubicBC_b,callback:function(e){t.proxyCubicBC_b=t._n(e)},expression:"proxyCubicBC_b"}}),t._v(" "),i("VTextField",{attrs:{label:"c",type:"number",dense:"",outlined:"",disabled:t.disabled},model:{value:t.proxyCubicBC_c,callback:function(e){t.proxyCubicBC_c=t._n(e)},expression:"proxyCubicBC_c"}})],1):t._e()])],1)};function Ht(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Xt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}Jt._withStripped=!0;var qt=c.a.filter,Qt={name:String,cubicBC_b:Number,cubicBC_c:Number,label:String,disabled:Boolean},Kt={name:"FilterFunctionConfigurator",props:Qt,computed:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ht(Object(i),!0).forEach((function(e){Xt(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ht(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},_(Object.keys(Qt),"proxy",["label","disabled"]),{filterFunctionNames:function(){return Object.keys(qt.filterFunctions)}})},te=i(48),ee=Object(a.a)(Kt,Jt,[],!1,null,null,null);j()(ee,{VExpandTransition:te.a,VSelect:ct.a,VTextField:pt.a}),ee.options.__file="src/js/components/pages/lens-playground/distortion-options/filter-function-configurator.vue";var ie=ee.exports;function ne(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function oe(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var re={filterFunc:String,filterFuncCubicBC_b:Number,filterFuncCubicBC_c:Number,windowFunc:String,windowFuncCubicBC_b:Number,windowFuncCubicBC_c:Number,support:Number,scale:Number,blur:Number,windowSupport:Number,disabled:Boolean},ae={name:"FilterConfigurator",components:{FilterFunctionConfigurator:ie},props:re,computed:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ne(Object(i),!0).forEach((function(e){oe(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ne(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},_(Object.keys(re),"proxy",["disabled"]))},se=Object(a.a)(ae,Yt,[],!1,null,null,null);j()(se,{VCol:lt.a,VRow:ut.a,VTextField:pt.a}),se.options.__file="src/js/components/pages/lens-playground/distortion-options/filter-configurator.vue";var le=se.exports,ue=c.a.filterPresets;function ce(t){return{get:function(){return this.localFilterOptions[t]},set:function(e){this.localFilterOptions[t]=e,this.$emit("update:custom-filter-options",this.localFilterOptions)}}}var pe={name:"FilterSettings",components:{FilterConfigurator:le},props:{filterPreset:String,customFilterOptions:Object,disabled:Boolean},data:function(){return{localFilterOptions:{}}},computed:{proxyFilterPreset:x("filterPreset"),presetNames:function(){var t=Object.keys(ue);return t.push("CUSTOM"),t},filterFunc:ce("filterFunc"),filterFuncCubicBC_b:ce("filterFuncCubicBC_b"),filterFuncCubicBC_c:ce("filterFuncCubicBC_c"),windowFunc:ce("windowFunc"),windowFuncCubicBC_b:ce("windowFuncCubicBC_b"),windowFuncCubicBC_c:ce("windowFuncCubicBC_c"),support:ce("support"),scale:ce("scale"),blur:ce("blur"),windowSupport:ce("windowSupport")},methods:{emitFilterOptionsUpdate:function(){this.$emit("update:custom-filter-options",this.localFilterOptions)}},watch:{customFilterOptions:{handler:function(t,e){var i=this;t!==e&&Object.keys(t).forEach((function(e){return i.$set(i.localFilterOptions,e,t[e])}))},immediate:!0}}},fe=Object(a.a)(pe,Wt,[],!1,null,null,null);j()(fe,{VExpandTransition:te.a,VSelect:ct.a}),fe.options.__file="src/js/components/pages/lens-playground/distortion-options/filter-settings.vue";var de=fe.exports,he=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("VCheckbox",{attrs:{label:"Supersampling",disabled:t.disabled},on:{change:t.emitUpdate},model:{value:t.enabled,callback:function(e){t.enabled=e},expression:"enabled"}}),t._v(" "),i("VExpandTransition",[t.enabled?i("VTextField",{attrs:{type:"number",label:"Supersampling Factor",dense:"",outlined:"",disabled:t.disabled},on:{input:t.emitUpdate},model:{value:t.factor,callback:function(e){t.factor=t._n(e)},expression:"factor"}}):t._e()],1)],1)};he._withStripped=!0;var me={name:"SupersamplingSettings",props:{supersample:[Boolean,Number],disabled:Boolean},data:function(){var t=!1!==this.supersample;return{enabled:t,factor:t?this.supersample:2}},methods:{emitUpdate:function(){this.enabled?this.$emit("update:supersample",this.factor):this.$emit("update:supersample",!1)}},watch:{supersample:function(t){!1!==t?(this.enabled=!0,this.factor=t):this.enabled=!1}}},be=i(438),ge=Object(a.a)(me,he,[],!1,null,"d506b9fa",null);j()(ge,{VCheckbox:be.a,VExpandTransition:te.a,VTextField:pt.a}),ge.options.__file="src/js/components/pages/lens-playground/distortion-options/supersampling-settings.vue";var ve=ge.exports,ye=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h4",[t._v("Output Viewport Settings")]),t._v(" "),i("VRadioGroup",{attrs:{label:"Output Viewport"},model:{value:t.selectedViewport,callback:function(e){t.selectedViewport=e},expression:"selectedViewport"}},[i("VRadio",{attrs:{label:"Source Image Viewport",value:"source",disabled:t.disabled||t.sourceDisabled}}),t._v(" "),i("VRadio",{attrs:{label:"Best Fit",value:"bestfit",disabled:t.disabled||t.bestFitDisabled}}),t._v(" "),i("VRadio",{attrs:{label:"Custom",value:"custom",disabled:t.disabled}})],1),t._v(" "),i("VExpandTransition",["custom"===t.selectedViewport?i("VRow",{attrs:{dense:""}},[i("VCol",{attrs:{cols:"3"}},[i("VTextField",{attrs:{label:"x1",dense:"",outlined:"",type:"number",disabled:t.disabled},model:{value:t.x1,callback:function(e){t.x1=t._n(e)},expression:"x1"}})],1),t._v(" "),i("VCol",{attrs:{cols:"3"}},[i("VTextField",{attrs:{label:"y1",dense:"",outlined:"",type:"number",disabled:t.disabled},model:{value:t.y1,callback:function(e){t.y1=t._n(e)},expression:"y1"}})],1),t._v(" "),i("VCol",{attrs:{cols:"3"}},[i("VTextField",{attrs:{label:"x2",dense:"",outlined:"",type:"number",disabled:t.disabled},model:{value:t.x2,callback:function(e){t.x2=t._n(e)},expression:"x2"}})],1),t._v(" "),i("VCol",{attrs:{cols:"3"}},[i("VTextField",{attrs:{label:"y2",dense:"",outlined:"",type:"number",disabled:t.disabled},model:{value:t.y2,callback:function(e){t.y2=t._n(e)},expression:"y2"}})],1)],1):t._e()],1)],1)};function we(t){return{get:function(){return this.localViewport[t]},set:function(e){this.localViewport[t]=e,this.emitViewport()}}}ye._withStripped=!0;var xe={name:"ViewportSettings",props:{bestFit:Boolean,useCustomViewport:Boolean,customViewport:Object,bestFitDisabled:Boolean,sourceDisabled:Boolean,disabled:Boolean},data:function(){return{localViewport:{x1:0,y1:0,x2:0,y2:0}}},computed:{selectedViewport:{get:function(){return this.useCustomViewport?"custom":this.bestFit?"bestfit":"source"},set:function(t){switch(t){case"source":this.$emit("update:best-fit",!1),this.$emit("update:use-custom-viewport",!1);break;case"bestfit":this.$emit("update:best-fit",!0),this.$emit("update:use-custom-viewport",!1);break;case"custom":this.$emit("update:best-fit",!1),this.$emit("update:use-custom-viewport",!0),this.emitViewport()}}},x1:we("x1"),y1:we("y1"),x2:we("x2"),y2:we("y2")},methods:{emitViewport:function(){this.$emit("update:custom-viewport",this.localViewport)}},watch:{customViewport:{handler:function(t,e){if(t!==e){var i=t.x1,n=t.y1,o=t.x2,r=t.y2;this.localViewport={x1:i,y1:n,x2:o,y2:r}}},immediate:!0}}},_e=i(439),Oe=i(440),Ve=Object(a.a)(xe,ye,[],!1,null,"eb35c2b6",null);j()(Ve,{VCol:lt.a,VExpandTransition:te.a,VRadio:_e.a,VRadioGroup:Oe.a,VRow:ut.a,VTextField:pt.a}),Ve.options.__file="src/js/components/pages/lens-playground/distortion-options/viewport-settings.vue";var Ce=Ve.exports;function Ie(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Pe(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Se={resample:Boolean,filterPreset:String,customFilterOptions:Object,supersample:[Boolean,Number],matteColor:Array,bestFit:Boolean,useCustomViewport:Boolean,customViewport:Object,disableResampling:Boolean,disableBestFit:Boolean,disableSourceViewport:Boolean,disabled:Boolean},Ae={name:"DistortionOptions",components:{FilterSettings:de,ColorInput:rt,SupersamplingSettings:ve,ViewportSettings:Ce},props:Se,computed:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ie(Object(i),!0).forEach((function(e){Pe(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ie(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},_(Object.keys(Se),"proxy",["disableResampling","disableBestFit","disableSourceViewport","disabled"]))},ke=Object(a.a)(Ae,Ut,[],!1,null,null,null);function Fe(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Me(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}j()(ke,{VCheckbox:be.a,VExpandTransition:te.a}),ke.options.__file="src/js/components/pages/lens-playground/distortion-options/distortion-options.vue";var Te,je,Ee={name:"InputSettings",components:{ImageSettings:dt,DistortionSettings:Zt,DistortionOptions:ke.exports},props:{imageOptions:Object,distortion:Object,distortionOptions:Object,sourceImage:Image,disabled:Boolean,argsActiveOffset:[Number,null]},data:function(){return{localImageOptions:{},localDistortion:{},localDistortionOptions:{}}},computed:{sourceViewportDisabled:function(){return"ARC"===this.localDistortion.name},bestFitViewportDisabled:function(){return!1}},watch:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Fe(Object(i),!0).forEach((function(e){Me(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Fe(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},(Te={imageOptions:"localImageOptions",distortion:"localDistortion",distortionOptions:"localDistortionOptions"},je={},Object.keys(Te).forEach((function(t){var e,i=Te[t];je[t]={handler:(e=i,function(t){Object(v.isEqual)(t,this[e])||(this[e]=Object(v.cloneDeep)(t))}),immediate:!0,deep:!0},je[i]={handler:y(t),deep:!0}})),je)),methods:{}},De=i(189),Be=Object(a.a)(Ee,q,[],!1,null,null,null);j()(Be,{VDivider:De.a}),Be.options.__file="src/js/components/pages/lens-playground/input-settings.vue";var Re=Be.exports,Le=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("VTextField",{attrs:{label:"Processing Time",value:t.distortionTimeString,readonly:"",dense:"",outlined:""}}),t._v(" "),i("h5",{staticClass:"mt-3"},[t._v("Output Viewport")]),t._v(" "),i("VRow",{attrs:{dense:""}},t._l(t.distortedViewport,(function(t,e){return i("VCol",{key:e,attrs:{cols:"width"===e||"height"===e?6:3}},[i("VTextField",{attrs:{label:e,value:t,readonly:"",dense:"",outlined:""}})],1)})),1),t._v(" "),i("VBtn",{on:{click:function(e){return t.$emit("use-distorted-as-source")}}},[t._v("\n        Use As Source Image\n    ")])],1)};Le._withStripped=!0;i(110);var Ne={name:"OutputInfo",props:{processingTime:[Number,null],distortedViewport:Object},computed:{distortionTimeString:function(){if(null===this.processingTime)return"-";var t=this.processingTime,e=Math.floor(t/36e5);t-=36e5*e;var i=Math.floor(t/6e4);t-=6e4*i;var n=Math.floor(t/1e3);t-=1e3*n;var o=[];e&&o.push(e+" h"),(e||i)&&o.push((i<10?"0":"")+i+" min");var r=(t<10?"00":t<100?"0":"")+t;return o.push(((e||i)&&n<10?"0":"")+n+"."+r+" sec"),o.join(",")}}},$e=Object(a.a)(Ne,Le,[],!1,null,null,null);j()($e,{VBtn:E.a,VCol:lt.a,VRow:ut.a,VTextField:pt.a}),$e.options.__file="src/js/components/pages/lens-playground/output-info.vue";var ze=$e.exports,Ge=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.mobile?i("VSpeedDial",{attrs:{direction:"top",absolute:"",bottom:"",right:""},scopedSlots:t._u([{key:"activator",fn:function(){return[i("VBtn",{attrs:{fab:"",color:"teal",loading:t.loading,disabled:t.disabled}},[i("VBadge",{attrs:{value:t.showMainBadge&&!t.fab,dot:"",color:"red",overlap:""}},[t.fab?i("VIcon",[t._v("mdi-close")]):i("VIcon",[t._v("mdi-dots-vertical-circle")])],1)],1)]},proxy:!0}],null,!1,530000854),model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}},[t._v(" "),i("VBtn",{attrs:{fab:"",color:"primary",disabled:t.disabled||t.disableDistortion},on:{click:function(e){return t.$emit("distort")}}},[i("VIcon",[t._v("mdi-camera-iris")])],1),t._v(" "),i("VBtn",{attrs:{fab:"",color:"red",disabled:t.disabled},on:{click:function(e){return t.$emit("show-input-settings")}}},[i("VIcon",[t._v("mdi-cogs")])],1),t._v(" "),t.showOutputInfo?i("VBtn",{attrs:{fab:"",color:"blue",disabled:t.disabled},on:{click:t.onShowOutputInfo}},[i("VBadge",{attrs:{value:t.showOutputInfoBadge,dot:"",color:"red",overlap:""}},[i("VIcon",[t._v("mdi-information-outline")])],1)],1):t._e()],1):i("VBtn",{attrs:{fab:"",color:"primary",loading:t.loading,disabled:t.disabled||t.disableDistortion,absolute:"",bottom:"",right:""},on:{click:function(e){return e.stopPropagation(),t.$emit("distort")}}},[i("VIcon",[t._v("mdi-camera-iris")])],1)],1)};Ge._withStripped=!0;var Ze={name:"DistortionButton",props:{mobile:Boolean,disabled:Boolean,loading:Boolean,disableDistortion:Boolean,showOutputInfo:Boolean},data:function(){return{fab:!1,showMainBadge:!1,showOutputInfoBadge:!1}},watch:{showOutputInfo:function(t){this.showMainBadge=t,this.showOutputInfoBadge=t}},methods:{onShowOutputInfo:function(){this.showMainBadge=!1,this.showOutputInfoBadge=!1,this.$emit("show-output-info")}}},Ue=i(441),We=i(442),Ye=Object(a.a)(Ze,Ge,[],!1,null,null,null);j()(Ye,{VBadge:Ue.a,VBtn:E.a,VIcon:R.a,VSpeedDial:We.a}),Ye.options.__file="src/js/components/pages/lens-playground/distortion-button.vue";var Je={name:"LensPlayground",mixins:[g,V],components:{FileSelectionArea:l,ImageArea:X,InputSettings:Re,OutputInfo:ze,DistortionButton:Ye.exports},data:function(){return{inputOutputTab:0,showMobileInputSettings:!1,showMobileOutputInfo:!1,fab:!1,waitingForPoint:null}},computed:{isMobile:function(){var t=this.$vuetify.breakpoint.name;return"sm"===t||"xs"===t},isSourceImageLoaded:function(){return!!this.sourceImage},hasDistortionResult:function(){return!!this.distortedImage},isOutputTabDisabled:function(){return!this.hasDistortionResult},showLoading:function(){return this.loadingImage||this.performingDistortion},distortedViewport:function(){if(!this.distortedImage)return null;var t=this.distortedImage.viewport,e=t.x1,i=t.y1,n=t.x2,o=t.y2,r=this.distortedImage;return{x1:e,y1:i,x2:n,y2:o,width:r.width,height:r.height}}},watch:{"distortion.name":function(){this.waitingForPoint=null}},methods:{onFileSelected:function(t){t&&(this.isMobile&&this.closeInputSettingsDialog(),this.sourceImage=null,this.distortedImage=null,this.imageOptions.initialViewportOffset={x:0,y:0},this.loadImageFile(t[0]))},onUseDistortedAsSource:function(){this.closeInputSettingsDialog(),this.closeOutputInfoDialog(),this.sourceImage=this.distortedImage.image,this.imageOptions.initialViewportOffset={x:this.distortedImage.viewport.x1,y:this.distortedImage.viewport.y1},this.distortedImage=null,this.inputOutputTab=0},onDistortBtnClick:function(){var t=this;return this.closeInputSettingsDialog(),this.closeOutputInfoDialog(),this.inputOutputTab=0,this.distort(this.sourceImage).then((function(){t.inputOutputTab=1}))},onPickPoint:function(t){this.isMobile&&this.closeInputSettingsDialog(),this.waitingForPoint=t},onPickPointCancel:function(){this.waitingForPoint=null},onImagePlaneClick:function(t){var e=t.x,i=t.y;null!==this.waitingForPoint&&(this.setControlPoint(e,i,this.waitingForPoint),this.waitingForPoint=null,this.isMobile&&this.openInputSettingsDialog())},openInputSettingsDialog:function(){this.showMobileInputSettings=!0},closeInputSettingsDialog:function(){this.showMobileInputSettings=!1},openOutputInfoDialog:function(){this.showMobileOutputInfo=!0},closeOutputInfoDialog:function(){this.showMobileOutputInfo=!1}}},He=(i(470),i(450)),Xe=i(443),qe=i(187),Qe=i(124),Ke=i(449),ti=i(193),ei=Object(a.a)(Je,n,[],!1,null,"d9410534",null);j()(ei,{VBtn:E.a,VCard:D.a,VCardActions:B.a,VCardText:B.b,VCol:lt.a,VContainer:He.a,VDialog:Xe.a,VIcon:R.a,VOverlay:qe.a,VProgressCircular:Qe.a,VRow:ut.a,VTab:W.a,VTabItem:Ke.a,VTabs:Y.a,VToolbar:J.a,VToolbarTitle:ti.a}),ei.options.__file="src/js/components/pages/lens-playground/index.vue";e.default=ei.exports}}]);
//# sourceMappingURL=playground.js.map?620cdc8e05c7bf5dae00